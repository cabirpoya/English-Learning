/*! For license information please see EzHeaderBidding.js.LICENSE.txt */
(()=>{var e={633:(e,t,r)=>{var i=r(738).default;function n(){"use strict";e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",l=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var n=t&&t.prototype instanceof _?t:_,o=Object.create(n.prototype),a=new j(i||[]);return s(o,"_invoke",{value:I(e,r,a)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="suspendedYield",b="executing",y="completed",g={};function _(){}function w(){}function B(){}var k={};p(k,u,(function(){return this}));var O=Object.getPrototypeOf,P=O&&O(O(T([])));P&&P!==o&&a.call(P,u)&&(k=P);var S=B.prototype=_.prototype=Object.create(k);function z(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(n,o,s,d){var u=h(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,d)}),(function(e){r("throw",e,s,d)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,d)}))}d(u.arg)}var n;s(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(o,o):o()}})}function I(e,r,i){var n=v;return function(o,a){if(n===b)throw Error("Generator is already running");if(n===y){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var d=x(s,i);if(d){if(d===g)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===v)throw n=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=b;var u=h(e,r,i);if("normal"===u.type){if(n=i.done?y:m,u.arg===g)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=y,i.method="throw",i.arg=u.arg)}}}function x(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=h(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=B,s(S,"constructor",{value:B,configurable:!0}),s(B,"constructor",{value:w,configurable:!0}),w.displayName=p(B,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,B):(e.__proto__=B,p(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},z(A.prototype),p(A.prototype,l,(function(){return this})),r.AsyncIterator=A,r.async=function(e,t,i,n,o){void 0===o&&(o=Promise);var a=new A(f(e,t,i,n),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},z(S),p(S,c,"Generator"),p(S,u,(function(){return this})),p(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=T,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,n){return s.type="throw",s.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(d&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),F(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;F(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:T(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),g}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var i=r(633)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function i(e,r){if(e){if("string"==typeof e)return t(e,r);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,r):void 0}}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function d(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){var r=function(e){return function(){reportEzError(e,"header-bidding."+t)}};"function"==typeof reportEzError?r(e):window.addEventListener("reportEzErrorDefined",r(e),{once:!0}),console.error(e)}}}function l(e,t){var r;void 0!==window.__ez&&null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.queue)&&void 0!==r&&r.addFileOnce?window.__ez.queue.addFileOnce(e,t+"?cb=37&gcb=0",!0,[],!0,!1,!1,!0):setTimeout((function(){l(e,t)}),200)}function c(){var e;"undefined"!=typeof __ez&&__ez.fads&&__ez.fads.log&&(e=__ez.fads).log.apply(e,arguments)}var p={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BQ:"BES",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CW:"CUW",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SX:"SXM",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};function f(e){if(e){var t=e.toUpperCase();return p[t]}}const h=function(){var t=[];function r(e){epbjs.que.push((function(){for(var r=epbjs.getConfig().userSync.userIds||[],i=!1,n=0;n<r.length;n++)if(r[n].name===e.name){if(JSON.stringify(r[n])===JSON.stringify(e))return;i=!0,r[n]=e;break}-1===t.indexOf(e.name)&&t.push(e.name),i||r.push(e),epbjs.setConfig({userSync:{userIds:r}})}))}window.ezoicIdentity.queue.push(u((function(){window.ezoicIdentity.onIdentity((function(i){var n,o,a,s;o=!1,"true"===(null===(n=window._ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.disIdm)&&(o=!0),o||(window.ezoicIdentity.isIdentityReady()?((s=window.ezoicIdentity.getProviderId("uid2"))&&r({name:"uid2",params:{uid2Token:s}}),(a=window.ezoicIdentity.getProviderId("euid"))&&r({name:"euid",params:{euidToken:a}}),window.ezoicIdentity.getProviderId("id5")&&r({name:"id5Id",params:{partnerId:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),function(){if(void 0!==window.__ezLiveRampConsent&&1==window.__ezLiveRampConsent&&"object"==e(window.ats)&&window.ats.envelopeModuleLoaded&&void 0!==window.ezoicIdentity&&"function"==typeof window.ezoicIdentity.getUID){var t=window.ezoicIdentity.getUID();if(t.email){var r=[];["sha256","sha1","md5"].forEach((function(e){t.email[e]&&r.push(t.email[e])})),r.length>0&&window.ats.setAdditionalData({type:"emailHashes",id:r}),t.email.email&&window.ats.setAdditionalData({type:"email",id:t.email.email})}t.phone&&(t.phone.sha256&&window.ats.setAdditionalData({type:"phoneNumberHashes",id:[t.phone.sha256]}),t.phone.phone&&window.ats.setAdditionalData({type:"phoneNumber",id:t.phone.phone}))}}(),"undefined"!=typeof ez__sspDomain&&"undefined"!=typeof ez__uIdHash&&r({name:"pubProvidedId",params:{eids:[{source:ez__sspDomain,uids:[{id:ez__uIdHash,atype:3,ext:{stype:"ppuid"}}]}]}}),epbjs.que.push((function(){0!==t.length&&epbjs.refreshUserIds({submoduleNames:t},(function(){c("IDs setIDs: Updated modules: "+t.join(", ")),t=[],epbjs.registerSignalSources()}))}))):setTimeout((function(){}),50))}))}),"init"))},v=function(){u((function(){"undefined"!=typeof window&&(l("identity","https://go.ezodn.com/detroitchicago/indy.js"),window.ezoicIdentity=window.ezoicIdentity||{},window.ezoicIdentity.queue=window.ezoicIdentity.queue||[],h())}),"modselect")()};void 0!==window.ezptlog&&!0===window.ezptlog&&(window.epbjs=window.epbjs||{},window.epbjs.que=window.epbjs.que||[]);const m=function(){return d((function e(){o(this,e),window.epbjs=window.epbjs||{},epbjs=window.epbjs||{},epbjs.que=epbjs.que||[],epbjs.ezAdUnits=epbjs.ezAdUnits||[],epbjs.ezdss=epbjs.ezdss||[],epbjs.ezas=epbjs.ezas||[],epbjs.ezobid=epbjs.ezobid||[],window.ezoptbid=window.ezoptbid||[],this.videoHBEnabled="undefined"!=typeof __ezInstream||"undefined"!=typeof __ezOutstream}),[{key:"init",value:function(){var e=this;u((function(){v(),e.setUpGlobalFunctions(),e.setUpConfigs(),void 0!==__ez.fads&&1!=__ez.fads.isJIT&&e.setUpEventListeners()}),"EpbjsController.init")()}},{key:"setUpGlobalFunctions",value:function(){window.getSlotForhb=u((function(e){for(var t in window.ezslots)if(window[window.ezslots[t]].getSlotElementId()==e)return window[window.ezslots[t]]}),"getSlotForhb"),window.epbjsRequestAdUnits=u((function(e){if(void 0!==window.ezoResponsiveSizes)for(var t=0;t<e.length;t++)e[t]=window.epbjsApplyResponsiveSizes(e[t]);void 0!==window.ezstandalone?epbjs.que.push(u((function(){for(var t in e){var r=e[t];epbjs.removeAdUnit(r.code);var i=!1;for(var n in epbjs.ezAdUnits)epbjs.ezAdUnits[n].code==r.code&&(epbjs.ezAdUnits[n]=JSON.parse(JSON.stringify(r)),i=!0);i||epbjs.ezAdUnits.push(JSON.parse(JSON.stringify(r)))}epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.1")):epbjs.que.push(u((function(){epbjs.ezAdUnits=JSON.parse(JSON.stringify(e)),epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.2")),epbjsBidRequest(e)}),"epbjsRequestAdUnits"),window.epbjsBidRequest=u((function(e){epbjs.que.push(u((function(){for(var t={},r=0;r<e.length;r++){if(void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.hasBidForAdUnit(e[r].code)){var i=epbjs.ezBidCache.getTopBidEventForAdUnit(e[r].code);null!==i&&(t[e[r].code]={bids:i})}window.setAuctionActive(e[r].code)}t.length>0&&("function"==typeof window.ezosethbbids?window.ezosethbbids(t):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,t)),epbjs.requestBids({adUnits:e,bidsBackHandler:function(e){"function"==typeof window.ezosethbbids?window.ezosethbbids(e):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,e)}})}),"epbjsBidRequest.1"))}),"epbjsBidRequest"),window.epbjsApplyResponsiveSizes=u((function(e){if(void 0===window.ezoResponsiveSizes||void 0===window.ezoResponsiveSizes[e.code])return e;for(var t=!1,r=[],i=0;i<ezoResponsiveSizes[e.code].responsiveSizes.length;i++){var n=ezoResponsiveSizes[e.code].responsiveSizes[i];0===n.minWidth&&0===n.minHeight&&(t=!0);var o=n.sizes;n.altSizes&&(o=o.concat(n.altSizes)),r.push({minViewPort:[n.minWidth,n.minHeight],sizes:o})}return t||(r=[{minViewPort:[0,0],sizes:[]}].concat(r)),e.mediaTypes={banner:{sizeConfig:r}},e}),"epbjsApplyResponsiveSizes"),window.epbjsRefreshSlot=u((function(e){epbjs.que.push(u((function(){window.setAuctionActive(e.getSlotElementId()),epbjs.requestBids({adUnitCodes:[e.getSlotElementId()],bidsBackHandler:function(t){if(epbjs.setPAAPIConfigForGPT(),epbjs.fastLoadAuctionEnd=!0,window.ezosethbbids(t),void 0!==epbjs.ezBidCache){var r=epbjs.ezBidCache.getTopBidEventForAdUnit(e.getSlotElementId());null!==r&&(r.from_cache=!0,window.ezosethbbid(r))}}})}),"epbjsRefreshSlot.1"))}),"epbjsRefreshSlot"),window.setAuctionActive=u((function(e){window.activeAuctions=window.activeAuctions||{},window.activeAuctions[e]=!0}),"setAuctionActive"),window.setAuctionFinished=u((function(e){window.activeAuctions&&delete window.activeAuctions[e],window.isHbFinished=!0}),"setAuctionFinished"),window.isValid256Hash=u((function(e){return null!==e.match(/^[a-fA-F0-9]{64}$/g)}),"isValid256Hash")}},{key:"setUpCriteoUserIds",value:function(e){var t,r,i=this;if("undefined"!=typeof ez__sspDomain){var n;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!(n=window.ezoicIdentity.getUID())&&e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50);var o=[];null!==(r=n)&&void 0!==r&&null!==(r=r.email)&&void 0!==r&&r.sha256?(o.push({id:n.email.sha256,atype:3,ext:{stype:"hemsha256"}}),n.email.md5&&o.push({id:n.email.md5,atype:3,ext:{stype:"hemmd5"}})):"undefined"!=typeof ez__uIdHash&&o.push({id:ez__uIdHash,atype:1,ext:{stype:"ppuid",persistence:"js"}}),o.length>0&&epbjs.setBidderConfig({bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:ez__sspDomain,uids:o}]}}}}},fledgeEnabled:!0,defaultForSlots:1},!0)}}},{key:"setUpConfigs",value:function(){var e=this;epbjs.que.push(u((function(){var t;1==window.__enableAnalytics&&epbjs.enableAnalytics([{provider:"ga",options:{trackerName:"gatestprebid"}}]),epbjs.enableAnalytics([{provider:"atsAnalytics",options:{pid:"14067"}}]);var r={usp:{cmpApi:"iab",timeout:0}};"function"==typeof window.__gpp&&(r.gpp={cmpApi:"iab",timeout:0}),"function"==typeof window.__tcfapi&&(r.strictStorageEnforcement=!0,r.gdpr={cmpApi:"iab",timeout:12e4,defaultGdprScope:!0});var i={};!0===window.ezhbopt?i.buckets=[{precision:2,min:0,max:300,increment:.01}]:i.buckets=[{precision:2,min:0,max:5,increment:.01},{precision:2,min:5,max:50,increment:.1},{precision:2,min:50,max:120,increment:5}],epbjs.aliasBidder("aol","onedisplay"),epbjs.aliasBidder("aol","onemobile");var o=!1;void 0===window.ezpbCache&&(o=!0);var a=[{name:"criteo"},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=muno13d&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"quantcastId"},{name:"amxId",storage:{name:"amxId",type:"html5",expires:1}},{name:"sharedId",params:{},storage:{type:"cookie",name:"_sharedid",expires:365}},{name:"lotamePanoramaId"},{name:"hadronId",params:{partnerId:524}},{name:"33acrossId",params:{pid:"0010b00002MpnPqAAJ"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}}],s={name:"id5Id",params:{partner:457},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}};"undefined"!=typeof ez__id5pd&&(s.params.pd=ez__id5pd),a.push(s),a.push({name:"identityLink",params:{pid:"14067",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}});var d={name:"connectId",params:{pixelId:58713}};if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){var u,l=window.ezoicIdentity.getUID();l&&null!=l&&null!==(u=l.email)&&void 0!==u&&u.sha256&&(d.params.he=l.email.sha256)}a.push(d);var p="";"undefined"!=typeof __sellerid&&(p=__sellerid);var h,v={asi:"ezoic.ai",sid:p,hp:1};h="undefined"!=typeof __allSiteApprovedBidders?__allSiteApprovedBidders:"*";var m={};if("undefined"!=typeof __s2sbidders&&__s2sbidders.length>0||"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0||"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0){var b=[];if("undefined"!=typeof __s2sbidders&&__s2sbidders.length>0&&b.push.apply(b,n(__s2sbidders)),"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0&&b.push.apply(b,n(__s2sinstreambidders)),"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0&&b.push.apply(b,n(__s2soutstreambidders)),m={accountId:"1",bidders:b,enabled:!0,endpoint:"https://pbserver.ezoic.com/openrtb2/auction",syncEndpoint:"https://pbserver.ezoic.com/cookie_sync",extPrebid:{targeting:{pricegranularity:{ranges:[{max:300,increment:.01}]},includewinners:!0,includebidderkeys:!0},cache:{vastxml:{returnCreative:!1}},aliases:{amx_s2s:"amx",cadent_aperture_mx_s2s:"cadent_aperture_mx",ix_s2s:"ix",inmobi_s2s:"inmobi",medianet_s2s:"medianet",pubmatic_s2s:"pubmatic",sovrn_s2s:"sovrn",openx_s2s:"openx",rubicon_s2s:"rubicon",onetag_s2s:"onetag",sharethrough_s2s:"sharethrough",unruly_s2s:"unruly","33across_i_s2s":"33across",amx_i_s2s:"amx",appnexus_i_s2s:"appnexus",cadent_aperture_mx_i_s2s:"cadent_aperture_mx",criteo_i_s2s:"criteo",inmobi_i_s2s:"inmobi",insticator_i_s2s:"insticator",ix_i_s2s:"ix",medianet_i_s2s:"medianet",minutemedia_i_s2s:"minutemedia",onetag_i_s2s:"onetag",openx_i_s2s:"openx",pubmatic_i_s2s:"pubmatic",rubicon_i_s2s:"rubicon",sharethrough_i_s2s:"sharethrough",smartadserver_i_s2s:"smartadserver",sonobi_i_s2s:"sonobi",sovrn_i_s2s:"sovrn",triplelift_i_s2s:"triplelift",unruly_i_s2s:"unruly",vidazoo_i_s2s:"vidazoo",yieldmo_i_s2s:"yieldmo","33across_o_s2s":"33across",amx_o_s2s:"amx",appnexus_o_s2s:"appnexus",cadent_aperture_mx_o_s2s:"cadent_aperture_mx",criteo_o_s2s:"criteo",inmobi_o_s2s:"inmobi",insticator_o_s2s:"insticator",ix_o_s2s:"ix",medianet_o_s2s:"medianet",minutemedia_o_s2s:"minutemedia",onetag_o_s2s:"onetag",openx_o_s2s:"openx",pubmatic_o_s2s:"pubmatic",rubicon_o_s2s:"rubicon",sharethrough_o_s2s:"sharethrough",smartadserver_o_s2s:"smartadserver",sonobi_o_s2s:"sonobi",sovrn_o_s2s:"sovrn",triplelift_o_s2s:"triplelift",unruly_o_s2s:"unruly",vidazoo_o_s2s:"vidazoo",yieldmo_o_s2s:"yieldmo"}}},window.location.search.includes("ez_mnet_pbs=1")){var y="8CUIXQW8H";m.accountId=y,m.endpoint="https://prebid-s2s.media.net/openrtb2/auction",m.syncEndpoint="https://prebid-s2s.media.net/cookie_sync",epbjs.enableAnalytics([{provider:"medianetAnalytics",options:{cid:y}}])}if("undefined"!=typeof epbjs&&epbjs.SS)for(var g in m.extPrebid.aliases){var _=m.extPrebid.aliases[g];if(epbjs.SS.hasOwnProperty(_)){var w=epbjs.SS[_];epbjs.SS[g]=w}}}var B={};try{var k,O,P,S,z,A,I,x,C,F,j,T;B={site:{name:document.title,cattax:6,cat:[],sectioncat:[],pagecat:((null===(k=window._ezaq)||void 0===k?void 0:k.page_iab_categories)||[]).map((function(e){return e.toString()})),page:location.href,ref:document.referrer,keywords:(null===(O=document.querySelector('meta[name="keywords"]'))||void 0===O?void 0:O.content)||""},video:{minbitrate:300,maxbitrate:96e3}},"undefined"!=typeof __advertiserRule&&(B.badv=__advertiserRule),window.__ez&&window.__ez.tf&&"true"==window.__ez.tf.siteIAB&&(B.site.cat=((null===(x=window._ezaq)||void 0===x?void 0:x.site_iab_categories)||[]).map((function(e){return e.toString()}))),null!==(P=window._ezaq)&&void 0!==P&&P.first_party_signals_page_categories&&(B.site.pagecat=((null===(C=window._ezaq)||void 0===C?void 0:C.first_party_signals_page_categories)||[]).split(",").map((function(e){return e.trim()}))),null!==(S=window._ezaq)&&void 0!==S&&S.first_party_signals_domain_categories&&(B.site.cat=((null===(F=window._ezaq)||void 0===F?void 0:F.first_party_signals_domain_categories)||[]).split(",").map((function(e){return e.trim()})),(!B.site.pagecat||B.site.pagecat&&0===B.site.pagecat.length)&&(B.site.pagecat=B.site.cat)),null!==(z=window._ezaq)&&void 0!==z&&z.first_party_signals_keywords&&(B.site.keywords=null===(j=window._ezaq)||void 0===j?void 0:j.first_party_signals_keywords),null!==(A=window._ezaq)&&void 0!==A&&A.ortb_signals_language&&(B.site.content=B.site.content||{},B.site.content.language=null===(T=window._ezaq)||void 0===T?void 0:T.ortb_signals_language);var U="undefined"!=typeof _ezaq?_ezaq.domain:"";if(""!=U&&(B.site.domain=U),B.site.mobile=1,B.site.privacypolicy=1,B.device=B.device||{},B.device.ua=navigator.userAgent,B.device.dnt="1"===navigator.doNotTrack?1:0,B.device.devicetype=2,B.device.js=1,/mobile/i.test(navigator.userAgent)?B.device.devicetype=4:/tablet/i.test(navigator.userAgent)&&(B.device.devicetype=5),null!==(I=window._ezaq)&&void 0!==I&&I.country){var R=window._ezaq,E=R.country,M=R.state,D={country:f(E)||"USA"};if(M){var L=function(e,t){if(e&&t){var r=e.toUpperCase(),i=t.toUpperCase();return"US"===r?i:"".concat(r,"-").concat(i)}}(E,M);L&&(D.region=L)}B.user=B.user||{},B.user.geo=D,B.device=B.device||{},B.device.geo=D}}catch(e){c("Error setting up ortb2",e)}epbjs.setConfig({gptPreAuction:{enabled:!0,mcmEnabled:!0},minBidCacheTTL:300,eventHistoryTTL:10,criteo:{fastBidVersion:"latest"},bidderTimeout:void 0===epbjs.bidderTimeout||0===epbjs.bidderTimeout?2500:epbjs.bidderTimeout,useBidCache:o,schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[v]}},priceGranularity:i,userSync:{userIds:a,filterSettings:{iframe:{bidders:h,filter:"include"},image:{bidders:h,filter:"include"}},syncDelay:3e3,aliasSyncEnabled:!0,auctionDelay:500,encryptedSignalSources:{sources:[{source:["id5-sync.com","sharedid.org","pubcid.org","uidapi.com","criteo.com"],encrypt:!1}]},topics:{maxTopicCaller:4,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7},{bidder:"onetag",iframeURL:"https://onetag-sys.com/static/topicsapi.html",expiry:7}]}},s2sConfig:m,consentManagement:r,bidderSequence:"fixed",enableTIDs:!0,paapi:{enabled:!0,gpt:{autoconfig:!1},defaultForSlots:1},disableAjaxTimeout:!0,ortb2:B}),epbjs.setConfig({cache:{useLocal:!0},rubicon:{disableFloors:!0}}),void 0!==__allBidders.find((function(e){return"yahoossp"===e.bidder}))&&epbjs.setConfig({yahoossp:{mode:"all"}}),e.setUpCriteoUserIds(Date.now()),epbjs.bidderSettings=epbjs.bidderSettings||{},epbjs.bidderSettings.standard={adserverTargeting:[{key:"epb",val:function(e){return e.bidderCode}},{key:"epa",val:function(e){return e.adId}},{key:"epp",val:function(e){return e.pbCg}},{key:"epf",val:function(e){return e.mediaType}},{key:"eps",val:function(e){var t=e.bidder;if("ehb"==e.bidder)return 0;if(void 0!==epbjs.SS[t.toLowerCase()])return epbjs.SS[t.toLowerCase()];if(void 0!==epbjs.SS[t.toLowerCase()])return epbjs.SS[t.toLowerCase()];if("video"!==e.mediaType)return console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),0;var r={};return"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("prebidBidders")&&__ezInstream.prebidBidders.map((function(e){void 0!==e.ssid&&(r[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("prebidBidders")&&__ezOutstream.prebidBidders.map((function(e){void 0!==e.ssid&&(r[e.bidder]=parseInt(e.ssid))})),r.hasOwnProperty(e.bidder)?r[e.bidder]:void 0}},{key:"epr",val:function(e){return e.source}}],storageAllowed:!0}}),"setUpConfigs"))}},{key:"getAllVideoProviders",value:function(){var e=[];return videojs&&videojs.getAllPlayers().forEach((function(t){var r={divId:t.id_,vendorCode:2,playerConfig:{params:{adPluginConfig:{numRedirects:10},vendorConfig:{controls:!1,autoplay:!0,preload:"auto"}}}};e.push(r)})),e}},{key:"setUpEventListeners",value:function(){epbjs.que.push((function(){epbjs.onEvent("bidWon",(function(t){var r=getSlotForhb(t.adUnitCode);if("true"==new URL(window.location.href).searchParams.get("ez_hb_fill_debug")){console.log("[EZ_HB_FILL_DEBUG]:",t.adUnitCode,"\nAd Network:",t.bidder,"\nPlaceholder ID:",parseInt(r.getTargeting("ap")[0])%1e3,"\nSize:",t.size,"\nAdvertiser Info:",t.meta,"\nRequest params:",t.params,"\nSource:",t.source,"\nFull bid info:",t);var i=document.createElement("h4");i.innerText="Ad Network: "+t.bidder+" "+t.source,i.style="color:black;background-color:white;border:solid green;";var n=document.getElementById(t.adUnitCode);null!=n&&n.children.length>0&&n.children[0].insertAdjacentElement("afterbegin",i)}var o=r.getTargeting("ic")[0];if(void 0!==o){var a=parseInt(o);isNaN(a)||__ez.pel.Add(r,[new __ezDotData("refresh_count",a)])}var s=r.getTargeting("eb_br")[0];void 0!==s&&__ez.pel.Add(r,[new __ezDotData("filled_bid_hash",s)]);var d=0;void 0!==r.getTargeting("lb")[0]&&(d=parseInt(r.getTargeting("lb")[0])/1e5);var u=t.bidder.toLowerCase(),l=0;void 0!==epbjs.SS[u]&&(l=epbjs.SS[u],__ez.pel.Add(r,[new __ezDotData("stat_source_id",l)],t.cpm/1e3,0,t.cpm/1e3,d,l));var c=r.getTargeting("hb_rt");if(void 0!==e(c)&&c.length>0&&""!==String(c[0])){var p=String(c[0]);__ez.pel.Add(r,[new __ezDotData("prebid_source",p)])}var f=t.cpm/1e3;__ez.pel.Add(r,[new __ezDotData("loaded",1)],f,0,f,d,l),__ez.bit.Add(window._ezaq.page_view_id,[new __ezDotData("est_revenue_usd",f)])})),epbjs.onEvent("bidResponse",(function(t){if("object"==e(epbjs.bidderSettings)&&t.bidder in epbjs.bidderSettings&&"function"==typeof epbjs.bidderSettings[t.bidder].bidCpmAdjustment){var r=Math.floor(100*epbjs.bidderSettings[t.bidder].bidCpmAdjustment(t.cpm,t))/100;void 0===r||isNaN(r)||(t.cpm=r,t.pbCg=r,t.adserverTargeting.epp=r)}if(void 0!==epbjs.ezBidCache){epbjs.ezBidCache.setHigherBidForAdUnit(t);var i=epbjs.ezBidCache.getTopBidEventForAdUnit(t.adUnitCode);null!==i&&(t=i)}window.ezosethbbid(t)})),epbjs.onEvent("auctionEnd",(function(e){var t,r=function(r){window.setAuctionFinished(e.adUnitCodes[r]),void 0!==window.nbabt&&!0===window.nbabt&&(t=window.ezslots.filter((function(t){return window[t].getSlotElementId()===e.adUnitCodes[r]}))).length>0&&""!=window[t[0]].getTargeting("hb_opt")[0]&&window.adjustHbValues&&window.adjustHbValues(window[t[0]])};for(var i in e.adUnitCodes)r(i);window.PrebidImpressionController&&(window.PrebidImpressionController.recordAuctionEndImpressions(e),window.PrebidImpressionController.batchFireAll())})),epbjs.onEvent("bidWon",(function(e){window.triggerPbjsAdWin(e),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e)})),window.triggerPbjsAdWin=function(e){var t=e.bidder;epbjs.ezas[e.adUnitCode]=e.size,"ehb"==t?epbjs.ezdss[e.adUnitCode]=e.ss:void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(e.bidder)>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(t.toLowerCase())>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.clearBidForUnit(e.adUnitCode,e.bidderCode)}}))}}])}();function b(e,t,r,i,n,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(i,n)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){b(o,i,n,a,s,"next",e)}function s(e){b(o,i,n,a,s,"throw",e)}a(void 0)}))}}function g(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=r(756),w=r.n(_);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],d=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k={epb:"hb_bidder",epa:"hb_adid",epp:"hb_pb",epf:"hb_format",eps:"hb_ssid"},O="https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&sz=640x480&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",P="prebid",S="-octx",z="https://vastproxy.ezoic.net",A={UNIFORM:"uniform",EXPONENTIAL:"exponential",GEOMETRIC:"geometric",HIGH_END:"highEnd",LOW_END:"lowEnd",HISTORICAL:"historical",HISTORICAL_BIDDER:"historicalBidder",RAMP_UP:"rampUp"};function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"undefined"!=typeof __ez&&__ez.tf&&"3"===__ez.tf.vabmf&&t&&"undefined"!=typeof __ezOutstream&&__ezOutstream.leastStatSourceFloors?null!==e&&__ezOutstream.leastStatSourceFloors.hasOwnProperty(e.ssid)?__ezOutstream.leastStatSourceFloors[e.ssid]:.02:0}function x(e,t,r){return new Promise((function(i,n){var o=function(){window.hasOwnProperty(e)&&(clearTimeout(a),clearInterval(s),i(window[e]))},a=setTimeout((function(){n("Variable not found.")}),t),s=setInterval(o,r);o()}))}function C(){if(F()){var e=Array.from(arguments);e.unshift("[Video HB]"),console.log.apply(console,e)}}function F(){return"1"===new URLSearchParams(window.location.search).get("ez_vhb_debug")}function j(){return"1"===new URLSearchParams(window.location.search).get("ez_fake_instream")}function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.__ezOutstream:window.__ezInstream;return void 0!==e&&void 0!==e.monetizationApproval&&e.monetizationApproval.MCMApproved}function U(e){if(null==e)return e;try{if("function"==typeof structuredClone)return structuredClone(e)}catch(e){console.warn("structuredClone failed, falling back to JSON method",e)}try{return JSON.parse(JSON.stringify(e))}catch(t){return console.error("Deep clone failed:",t),e}}function R(e){var t;return null===(t=window.ezVideoAdConductor)||void 0===t||null===(t=t.getVideoAdConductor())||void 0===t?void 0:t.getPlayerById(e)}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}I();var M=new WeakSet;function D(e){if(null!==e&&"undefined"!==e&&void 0!==e){if(void 0!==e.cpm&&e.cpm>this.maxHBBid)return e.cpm;if(void 0!==e.originalCpm&&e.originalCpm>this.maxHBBid)return e.originalCpm}return this.maxHBBid>0?this.maxHBBid:0}function L(e){var t=window.epbjs;if(!t||!t.markWinningBidAsUsed||!t.adServers)return this.vastURL;if(e.adserverTargeting){if(e.adserverTargeting.hasOwnProperty("epp")&&(e.adserverTargeting.epp=function(e){var t,r=e;return r>300&&(r=300),arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?((r=r<=0?0:r<=1?10*Math.floor(10*r+.5):r<=3?20*Math.floor(100*r/20+.5):r<=10?50*Math.floor(100*r/50+.5):r<=30?100*Math.floor(100*r/100+.5):r<=50?200*Math.floor(100*r/200+.5):r<=120?500*Math.floor(100*r/500+.5):1e3*Math.floor(100*r/1e3+.5))/100>e&&r>2&&(r-=r<=100?10:r<=300?20:r<=1e3?50:r<=3e3?100:r<=5e3?200:r<=12e3?500:1e3),(r/100).toFixed(2)):(r>=0&&r<=5?t=Math.floor(100*r)/100:r>5&&r<=50?t=Math.floor(10*r)/10:r>50&&r<=110?t=5*Math.floor(r/5):r>110&&r<=300&&(t=10*Math.floor(r/10)),t.toFixed(2))}(e.adserverTargeting.epp,this.isOutstream?__ezOutstream.IsEzDfpAccount:__ezInstream.IsEzDfpAccount),e.adserverTargeting.epp<=0))return this.vastURL;e.adserverTargeting=Object.entries(e.adserverTargeting).reduce((function(e,t){var r=B(t,2),i=r[0],n=r[1];return e[k[i]||i]=n,e}),{})}return t.adServers.dfp.buildVideoUrl({adUnit:this.prebidAdUnits,url:this.origVastURL,bid:e})}function V(e){var t=this,r=e.filter((function(e){return!t.bidders.includes(e)}));this.bidders=this.bidders.concat(r)}function H(e){this.receivedBidders.includes(e)||this.receivedBidders.push(e)}function N(e){if(epbjs&&epbjs.SS&&epbjs.SS.hasOwnProperty(e))return epbjs.SS[e];var t={};return"undefined"!=typeof __ezInstream&&__ezInstream.prebidBidders&&Array.isArray(__ezInstream.prebidBidders)&&__ezInstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.prebidBidders&&Array.isArray(__ezOutstream.prebidBidders)&&__ezOutstream.prebidBidders.forEach((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),t[e]}const q=function(){return d((function e(t){var r,i,n=this;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=M),i.add(r),g(this,"addedAPSToVAST",void 0),g(this,"addedPrebidToVAST",void 0),g(this,"apsBidCount",void 0),g(this,"apsBid",void 0),g(this,"bidFloorAction",void 0),g(this,"bidFloorGen",void 0),g(this,"bidFloorIndex",void 0),g(this,"bidFloorType",void 0),g(this,"bidders",void 0),g(this,"bidRetries",void 0),g(this,"breakID",void 0),g(this,"didS2SBidderWin",void 0),g(this,"fallbackVastBid",void 0),g(this,"fallbackVastCPM",void 0),g(this,"fallbackVastURL",void 0),g(this,"gpid",void 0),g(this,"hadAPSBid",void 0),g(this,"impressionCnt",void 0),g(this,"impressionId",void 0),g(this,"initialBidFloor",void 0),g(this,"isComplete",void 0),g(this,"isFloating",void 0),g(this,"isMultiAuction",void 0),g(this,"isOutstream",void 0),g(this,"IsSkipped",void 0),g(this,"isTriggered",void 0),g(this,"key",void 0),g(this,"lastBidHash",void 0),g(this,"maxHBBid",void 0),g(this,"maxHBBidder",void 0),g(this,"multiplier",void 0),g(this,"noFill",void 0),g(this,"origVastURL",void 0),g(this,"params",void 0),g(this,"played",void 0),g(this,"pmpDealsToConsider",void 0),g(this,"positionGen",void 0),g(this,"prebidBids",void 0),g(this,"prebidCPM",void 0),g(this,"prebidAdUnits",void 0),g(this,"prebidParams",void 0),g(this,"queryType",void 0),g(this,"receivedBidders",void 0),g(this,"retryCount",void 0),g(this,"startingBidFloorIndex",void 0),g(this,"statSourceId",void 0),g(this,"timeOffset",void 0),g(this,"timeOffsetSeconds",void 0),g(this,"vastURL",void 0),g(this,"videoAdBidFloor",void 0),g(this,"videoAdBidFloorAmazon",void 0),g(this,"videoAdBidHash",void 0),g(this,"videoAdBidFloorUnmodified",void 0),g(this,"videoFallbackFloors",void 0),g(this,"videoFallbackHashes",void 0),g(this,"videoFallbackType",void 0),g(this,"videoPmpDeal",void 0),Object.keys(t).forEach((function(e){n[e]=t[e]})),this.origVastURL||(this.origVastURL=this.vastURL),this.retryCount||(this.retryCount=0,null==t.startingBidFloorIndex&&(this.bidFloorIndex=0),this.lastBidHash=this.videoAdBidHash,this.maxHBBid=0,this.maxHBBidder=void 0,this.initialBidFloor=this.videoAdBidFloor),this.hasOwnProperty("apsBidCount")||(this.apsBidCount=0),this.isComplete=!1,this.isTriggered=!1,this.bidders=[],this.receivedBidders=[],this.statSourceId=void 0,this.prebidCPM=void 0,this.played=!1,this.hadAPSBid=!1,this.addedAPSToVAST=!1,this.addedPrebidToVAST=!1,this.pmpDealsToConsider=[],this.isMultiAuction=0,this.didS2SBidderWin=!1,this.hasOwnProperty("gpid")||(this.gpid=this.breakID)}),[{key:"getAPSStatSourceId",value:function(){return"undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.apsSlot.slotID?11324:"undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.apsSlot.slotID?11337:""}},{key:"assembleTagURL",value:function(e){if(e||this.onlyUseVastProxy())return this.chooseHighestBidForPrebidRenderer();var t=this.addBidsToVAST(),r=t.prebidBid,i=t.apsBid;return this.isInstreamTruePrice()&&!this.isOutstream&&r&&r.cpm<=.18&&r.cpm>0&&(this.fallbackVastURL=this.getVastProxyPrebidUrl(r),this.fallbackVastCPM=r.cpm,this.fallbackVastBid=r,C("No bids above 0.18, using fallback",this.fallbackVastBid)),this.updatePmpTargetingDeals(),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),C(this.key+"\nVAST URL: ",this.vastURL+"\nPrebid:",r,"\nAPS:",i),!!r||!!i}},{key:"fillInAdBreakForMultiFormatAd",value:function(){var e=this.getWinningPrebidBid();this.maxHBBidder=e,this.maxHBBid=E(M,this,D).call(this,e),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak()}},{key:"chooseHighestBidForPrebidRenderer",value:function(){C("Choosing highest bid for prebid renderer");var e=this.getWinningPrebidBid(),t=this.apsBid||null;this.maxHBBidder=e,this.maxHBBid=E(M,this,D).call(this,e);var r,i,n=!1;if(C("Prebid bid: ",e," APS bid: ",t," Max HB bid: ",this.maxHBBid),t&&(!e||t.bidVal>this.maxHBBid))this.vastURL=this.getVastProxyAPSUrl(t),null===(r=window.__ezDevtools)||void 0===r||null===(i=r.recordWinningBid)||void 0===i||i.call(r,this.impressionId,"amzn",t.bidVal),n=!0;else if(e){var o,a;this.vastURL=this.getVastProxyPrebidUrl(e),null===(o=window.__ezDevtools)||void 0===o||null===(a=o.recordWinningBid)||void 0===a||a.call(o,this.impressionId,e.bidder,e.cpm)}if(this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),this.noFill=!e&&!t,!this.noFill&&"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")){this.vastURL+="&mod="+_ezaq.ab_test_id;var s=n?this.getAPSStatSourceId():E(M,this,N).call(this,e.bidder);""!=s&&(this.vastURL+="&ssid="+s)}return!!e||!!t}},{key:"getVastProxyAPSUrl",value:function(e){var t=encodeURIComponent("https://aax.amazon-adsystem.com/e/dtb/vast?b="+e.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+e.amznbid);return"".concat(z,"/vast?adId=aps&vastUrl=").concat(t)}},{key:"getVastProxyPrebidUrl",value:function(e){var t=e&&e.ezVideoCacheKey?e.ezVideoCacheKey:e.videoCacheKey,r=encodeURIComponent("https://prebid.adnxs.com/pbc/v1/cache?uuid=".concat(t));return"".concat(z,"/vast?adId=").concat(e.videoCacheKey,"&vastUrl=").concat(r)}},{key:"getHighestBidWithSource",value:function(){var e,t,r,i=-1,n="",o=null,a=null,s=this.getWinningPrebidBid(),d=this.apsBid||null;return s&&(i=s.cpm,this.isInstreamTruePrice()&&!this.isOutstream&&s.cpm>=.19&&(i=s.cpm-.18),n=P,o=s,a=(null===(r=s.adserverTargeting)||void 0===r?void 0:r.hb_format)||s.mediaType||"video"),d&&d.bidVal>i&&(i=d.bidVal,n="aps",o=d,a="video"),{cpm:i,source:n,bid:o,format:a,adId:(null===(e=o)||void 0===e?void 0:e.adId)||(null===(t=o)||void 0===t?void 0:t.amzniid)}}},{key:"shouldAddBidToVAST",value:function(e,t,r){return e?!(t||r===P&&e<=.18&&this.isInstreamTruePrice()&&(C("Prebid bid is less than 0.18, not adding to VAST",e),1)):(C("shouldAddBidToVAST: falsy bid floor received"),!0)}},{key:"addBidsToVAST",value:function(){var e=this.getWinningPrebidBid(),t=this.apsBid||null;if(this.addedAPSToVAST&&this.addedPrebidToVAST)return{prebidBid:e,apsBid:t};this.maxHBBidder=e,this.maxHBBid=E(M,this,D).call(this,e),e&&this.shouldAddBidToVAST(e.cpm,this.addedPrebidToVAST,P)&&(this.vastURL=E(M,this,L).call(this,e),this.addedPrebidToVAST=!0);var r=!1;return(window.__ezInstream&&window.__ezInstream.PreferPrebidOverAmzn>0||window.__ezOutstream&&window.__ezOutstream.PreferPrebidOverAmzn>0)&&(r=!0),""==this.getAPSStatSourceId()||e&&r||(t?void 0!==t.encodedQsParams&&this.shouldAddBidToVAST(t.bidVal,this.addedAPSToVAST,"aps")&&(this.vastURL+=t.encodedQsParams,this.addedAPSToVAST=!0,"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!0)):"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!1)),{prebidBid:e,apsBid:t}}},{key:"resetPrebidBid",value:function(){this.maxHBBid=0,this.maxHBBidder=void 0,this.addedPrebidToVAST=!1;var e=this.vastURL.startsWith(z);this.vastURL=this.origVastURL,this.addedAPSToVAST=!1,this.assembleTagURL(e)}},{key:"recordBiddersForBreak",value:function(){var e=[];if("undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.prebidBidders&&0!=__ezInstream.prebidBidders.length){var t=__ezInstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(t)}if("undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.prebidBidders&&0!=__ezOutstream.prebidBidders.length){var r=__ezOutstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(r)}var i=this.getAPSStatSourceId();""!=i&&(e.push(i),this.apsBid&&E(M,this,H).call(this,i)),E(M,this,V).call(this,e)}},{key:"getVideoBidCacheTopBid",value:function(){var e,t=null,r=this.getPlayerId();if("function"==typeof(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache)){var i=__ez.vbf.getCache();i&&((t=i.getTopBid(r))?C("Top bid from videoBidCache:",t):C("No valid bids found in videoBidCache for player:",r))}return t}},{key:"getWinningPrebidBid",value:function(){return this.maxHBBidder?(C("Using previous set top bid:",this.maxHBBidder),this.maxHBBidder):this.getVideoBidCacheTopBid()}},{key:"isBidCacheLoaded",value:function(){return 1==__ez.fads.loaded&&void 0!==__ez.fads.adLoadHB&&1==__ez.fads.adLoadHB.loaded}},{key:"updatePrebidBidCacheWithBids",value:function(e){var t=this;C("bids already cached in bidResponse event, only updating received bidders"),e.forEach((function(e){var r=E(M,t,N).call(t,e.bidder);r&&E(M,t,H).call(t,r)}))}},{key:"handleWinningAdIdOrHbUUId",value:function(e){if(C("winning ad id",e),this.apsBid&&(this.apsBid.adId===e||"aps"==e))return C("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());var t=__ez.vbf.getCache();if(t){C("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r)return C("Found ad id or hbUUId:",e," in videoBidCache:",r),t.removeBid(e),void this.recordWinAndFirePrebidImpression(r)}C("neither aps nor prebid won the ad id or hbUUId: ",e)}},{key:"setStatSourceIdFromAdIdOrHbUUId",value:function(e){if(this.apsBid&&(this.apsBid.adId===e||"aps"==e))return C("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());var t=__ez.vbf.getCache();if(t){C("Checking videoBidCache for ad id or hbUUId:",e);var r=t.getBidByVideoCacheKey(e);if(r)return void(this.statSourceId=E(M,this,N).call(this,r.bidder))}}},{key:"recordWinAndFirePrebidImpression",value:function(e){var t,r;e&&(this.statSourceId=E(M,this,N).call(this,e.bidder),this.prebidCPM=e.cpm,__ez.vhb.recordWinForBidder(e.bidder,e.cpm),null===(t=window.__ezDevtools)||void 0===t||null===(r=t.recordWinningBid)||void 0===r||r.call(t,this.impressionId,e.bidder,e.cpm),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e),void 0!==e&&"string"==typeof e.bidder&&e.bidder.endsWith("_s2s")&&(this.didS2SBidderWin=!0),epbjs.markWinningBidAsUsed({adUnitCode:this.BreakID,adId:e.adId}))}},{key:"releasePrebidBids",value:function(){Array.isArray(this.prebidAdUnits)&&this.prebidAdUnits.length>0?this.prebidAdUnits.forEach((function(e){e&&e.code?(__ez.fads.adLoadHB.bidCache.releaseBid(e.code),C("Released bid for ad unit with key:",e.code)):C("Invalid ad unit or missing key:",e)})):C("No Prebid ad units provided.")}},{key:"removeCachedBidsFromAdBreak",value:function(){C("removing all bid from bid cache"),this.isBidCacheLoaded()&&(C("removing bid from bid cache"),Array.isArray(this.prebidAdUnits)&&this.prebidAdUnits.length>0?this.prebidAdUnits.forEach((function(e){e&&e.code?(__ez.fads.adLoadHB.bidCache.removeBidByCode(e.code),C("Removed bid for ad unit with code:",e.code)):C("Invalid ad unit or missing code:",e)})):C("No Prebid ad units provided.")),this.apsBid&&(C("removing aps bid from ad break: ",this.apsBid),this.apsBidCount=0,this.apsBid=null)}},{key:"getAdBreakPosition",value:function(e){var t=e.split("-");if(t.length<3)return console.error("Failed to parse ad break position - malformed breakId: "+e),"";var r=t[t.length-2];return"preroll"!==r&&"midroll"!==r&&"postroll"!==r?(console.error("Failed to parse ad break position - unknown position on breakId: "+e),""):"-"+r}},{key:"getPlayerId",value:function(){return this.key.split("$")[0]}},{key:"getIsPlayerCurrentlyFloating",value:function(){var e;return null===(e=R(this.getPlayerId()))||void 0===e?void 0:e.isCurrentlyFloating()}},{key:"setFallbackPosition",value:function(e){C("bid: getting highest floor below",e);for(var t=0,r=-1,i=0;i<this.videoFallbackFloors.length;i++)this.videoFallbackFloors[i]<=e&&this.videoFallbackFloors[i]>t&&(t=this.videoFallbackFloors[i],r=i);if(r>-1){if(this.bidFloorIndex>=r)return;this.videoAdBidFloor=t,this.videoAdBidHash=this.videoFallbackHashes[r],this.bidFloorIndex=r,this.startingBidFloorIndex=this.bidFloorIndex}else this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex;C("bid: setting fallback position to",this.videoAdBidFloor,this.videoAdBidHash)}},{key:"setStartingBidFloor",value:function(e){var t=e;C("bid: previous floor",t),t>0&&(t*=3),C("bid: getting highest floor below",t);var r=0,i=-1;if(t>0){for(var n=0;n<this.videoFallbackFloors.length;n++)if(this.videoFallbackFloors[n]<=t&&this.videoFallbackFloors[n]>r){i=n,(r=this.videoFallbackFloors[n])===e&&n>0?(i=n-1,C("bid: set floor up one step from last fill",r=this.videoFallbackFloors[n-1])):C("bid: set floor below 3x last fill",r);break}}else if(0===t){C("bid: finding floor ".concat(3," above ").concat(t));var o=this.videoFallbackFloors.indexOf(0);-1===o&&(o=this.videoFallbackFloors.length-1);var a=o-3;a<0&&(a=0),i=a,r=this.videoFallbackFloors[a]}i>-1?(this.videoAdBidFloor=r,this.videoAdBidHash=this.videoFallbackHashes[i],this.bidFloorIndex=i,this.startingBidFloorIndex=this.bidFloorIndex):(this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex),C("bid: updated ".concat(this.isOutstream?"outstream":"in-content"," fallback floor to ").concat(this.videoAdBidFloor," ").concat(this.videoAdBidHash))}},{key:"updatePmpTargetingDeals",value:function(){var e=this;if(void 0!==this.videoPmpDeal&&Array.isArray(this.videoPmpDeal)&&0!==this.videoPmpDeal.length){var t=[];this.videoAdBidFloor>.2&&this.videoPmpDeal.forEach((function(r){"undefined"!==r.adjustedDealFloor&&(r.adjustedDealFloor>=99999||e.videoAdBidFloor>r.adjustedLowerDealFloor&&e.videoAdBidFloor<r.adjustedUpperDealFloor)&&t.push(r.dealId)})),this.pmpDealsToConsider=t,this.vastURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t)return C("No key specified for VAST Tag custom targeting, returning VAST URL: "+e),e;if(!URL.canParse(e))return C("Invalid/Cannot parse VAST Tag URL: "+e),e;var i=new URL(e),n=i.searchParams;if(!n.has("cust_params"))return e;var o=new URLSearchParams(n.get("cust_params"));return null===r||r.length<1?o.has(t)?(C("Empty or null value specified for targeting key: ".concat(t,", val: ").concat(r,". Removing ").concat(t," from cust_params")),o.delete(t),n.set("cust_params",o.toString()),C("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString()):(C("No targeting key to remove because it is not in cust_params or the key is null here"),i.toString()):(Array.isArray(r)&&(r=r.join(",")),C("Setting VAST Custom Targeting Params with key: ".concat(t,", val: ").concat(r)),o.set(t,r),n.set("cust_params",o.toString()),C("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString())}(this.vastURL,"deal1",t)}}},{key:"markBreakAsComplete",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__ez&&__ez.vhb&&__ez.vhb.breaks&&t&&"object"==e(__ez.vhb.breaks[t])&&!r?__ez.vhb.breaks[t].isComplete=!0:__ez&&__ez.vhb&&__ez.vhb.floatingBreaks&&t&&"object"==e(__ez.vhb.floatingBreaks[t])&&(__ez.vhb.floatingBreaks[t].isComplete=!0)}},{key:"onlyUseVastProxy",value:function(){return!!(this.isOutstream&&("undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("OnlyUseVastProxy")&&__ezOutstream.OnlyUseVastProxy||"undefined"!=typeof __ez&&__ez.tf&&"true"===__ez.tf.vaosg))}},{key:"getVideoLanguage",value:function(t){if(void 0!==window.ezVideo&&"object"===e(window.ezVideo.playerLanguage)&&"string"==typeof t){var r=window.ezVideo.playerLanguage[t];if(r&&"string"==typeof r&&2===r.length)return r}return null}},{key:"isAdBreakFrontloaded",value:function(){return"FrontLoad"===this.positionGen||"FrontLoadOverridden"===this.positionGen}},{key:"isAdBreakCustomPosition",value:function(){return"pub-midroll"===this.positionGen||"pub-midrollOverridden"===this.positionGen}},{key:"isInstreamTruePrice",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vaitp)}},{key:"getNextBid",value:function(){var e=this.videoFallbackFloors[this.bidFloorIndex];if(void 0===this.videoFallbackHashes||this.bidFloorIndex>=this.videoFallbackHashes.length)return{hash:"zero",bidValue:0};var t=I();return e=Math.max(t,e),{hash:this.videoFallbackHashes[this.bidFloorIndex],bidValue:e}}},{key:"updateBidHash",value:function(e){this.lastBidHash.includes(",")&&(this.lastBidHash=encodeURIComponent(this.lastBidHash)),e.includes(",")&&(e=encodeURIComponent(e));var t=this.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(e));if(this.lastBidHash!==e&&t===this.vastURL)throw new Error("failed to replace old bid hash (".concat(this.lastBidHash,") with new hash (").concat(e,") in VAST ").concat(this.vastURL));this.vastURL=t,this.lastBidHash=e}},{key:"getMaxPrebidBidCpm",value:function(){var e;return(null===(e=this.prebidBids)||void 0===e?void 0:e.reduce((function(e,t){var r,i;return Math.max(e,null!==(r=null!==(i=t.cpm)&&void 0!==i?i:t.originalCpm)&&void 0!==r?r:0)}),0))||0}}])}();var G=function(){return d((function e(t){o(this,e),this.id=t.bidId||t.adId||Math.random().toString(36).substr(2,9),this.adId=t.adId||this.id,this.adUnitCode=t.adUnitCode,this.bidder=t.bidder,this.bidderCode=t.bidderCode||t.bidder,this.cpm=t.cpm,this.originalCpm=t.originalCpm,this.mediaType=t.mediaType,this.videoCacheKey=t.videoCacheKey||this.adId||this.id,this.ezVideoCacheKey=t.ezVideoCacheKey||this.videoCacheKey,this.vastUrl=t.vastUrl,this.mediaTypes=t.mediaTypes,this.adserverTargeting=t.adserverTargeting,this.requestId=t.requestId,this.responseTimestamp=t.responseTimestamp||Date.now(),this.ttl=t.ttl||300,this.source=t.source,this.playerId=null}),[{key:"isExpired",value:function(){return Date.now()>this.responseTimestamp+1e3*this.ttl-3e3}},{key:"timeRemaining",value:function(){var e=Date.now(),t=this.responseTimestamp+1e3*this.ttl;return Math.floor((t-e)/1e3)}},{key:"isBetterThan",value:function(e){return!e||!(this.isExpired()&&!e.isExpired())&&(!(this.isExpired()||!e.isExpired())||this.cpm>e.cpm)}}])}(),W=function(){return d((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;o(this,e),this.items=[],this.maxSize=t,this._needsExpiredCheck=!0}),[{key:"size",value:function(){return this._needsExpiredCheck&&this.removeExpired(),this.items.length}},{key:"isEmpty",value:function(){return this._needsExpiredCheck&&this.removeExpired(),0===this.items.length}},{key:"dequeue",value:function(){return this.isEmpty()?null:this.items.shift()}},{key:"peek",value:function(){return this.isEmpty()?null:this.items[0]}},{key:"enqueue",value:function(e){this._needsExpiredCheck&&this.removeExpired();for(var t=0;t<this.items.length&&this.items[t].cpm>e.cpm;)t++;if(this.size()>=this.maxSize&&t>=this.maxSize)return{added:!1,removedBid:null};this.items.splice(t,0,e);var r=null;return this.size()>this.maxSize&&(r=this.items.pop()),{added:!0,removedBid:r}}},{key:"removeExpired",value:function(){var e=this,t=n(this.items);return this.items=this.items.filter((function(e){return!e.isExpired()})),this._needsExpiredCheck=!1,t.filter((function(t){return!e.items.includes(t)}))}},{key:"markForExpiredCheck",value:function(){this._needsExpiredCheck=!0}},{key:"getHighestCPM",value:function(){return this.isEmpty()?0:this.items[0].cpm}},{key:"getLowestCPM",value:function(){return this.isEmpty()?0:this.items[this.size()-1].cpm}},{key:"isWorthCaching",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.size()<this.maxSize||e.cpm>this.getLowestCPM()}},{key:"getAllBids",value:function(){return this._needsExpiredCheck&&this.removeExpired(),n(this.items)}},{key:"findBidByVideoCacheKey",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.items.find((function(t){return t.videoCacheKey===e}))||null}},{key:"removeBid",value:function(e){this._needsExpiredCheck&&this.removeExpired();var t=this.items.findIndex((function(t){return t.videoCacheKey===e}));return-1===t?null:this.items.splice(t,1)[0]}}])}();const K=new(function(){return d((function e(){o(this,e),this.playerCaches={},this.bidIndex={},this.defaultMaxQueueSize=12,this.lastCleanup=Date.now(),this.cleanupInterval=15e3}),[{key:"getPlayerCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultMaxQueueSize;return this.playerCaches[e]||(this.playerCaches[e]=new W(t)),this.playerCaches[e]}},{key:"addBid",value:function(e,t){var r=new G(t);r.playerId=e,this.maybeCleanup();var i=this.getPlayerCache(e);if(!i.isWorthCaching(r))return C("Bid ".concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," not worth caching for player ").concat(e)),!1;var n=i.enqueue(r);return n.added&&(this.bidIndex[r.videoCacheKey]={playerId:e,bid:r},n.removedBid&&delete this.bidIndex[n.removedBid.videoCacheKey],C("Cached ".concat(r.mediaType," bid ").concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," for player ").concat(e))),n.added}},{key:"isWorthCaching",value:function(e,t){return this.getPlayerCache(e).isWorthCaching(t)}},{key:"getTopBid",value:function(e){return this.maybeCleanup(!0),this.getPlayerCache(e).peek()||null}},{key:"getBidByVideoCacheKey",value:function(e){var t=this.bidIndex[e];return t?t.bid.isExpired()?(this.removeBid(e),null):t.bid:null}},{key:"removeBid",value:function(e){var t=this.bidIndex[e];if(!t)return!1;var r=t.playerId;return!!this.getPlayerCache(r).removeBid(e)&&(delete this.bidIndex[e],!0)}},{key:"maybeCleanup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Date.now();if(!(r-this.lastCleanup<this.cleanupInterval)||t){C("Cleaning up expired bids from video bid cache"),this.lastCleanup=r,Object.values(this.playerCaches).forEach((function(e){e.markForExpiredCheck()}));var i=0;Object.entries(this.playerCaches).forEach((function(t){var r=B(t,2),n=r[0],o=r[1].removeExpired();o.length>0&&(o.forEach((function(t){delete e.bidIndex[t.videoCacheKey]})),C("Removed ".concat(o.length," expired bids from player ").concat(n)),i+=o.length)})),i>0&&C("Total of ".concat(i," expired bids removed from cache"))}}},{key:"getStats",value:function(){var e={totalPlayers:Object.keys(this.playerCaches).length,totalBids:Object.keys(this.bidIndex).length,playerStats:{}};return Object.entries(this.playerCaches).forEach((function(t){var r=B(t,2),i=r[0],n=r[1];e.playerStats[i]={bidCount:n.size(),highestCPM:n.getHighestCPM(),lowestCPM:n.getLowestCPM()}})),e}},{key:"setDefaultMaxQueueSize",value:function(e){"number"==typeof e&&e>0&&(this.defaultMaxQueueSize=e)}},{key:"setPlayerMaxQueueSize",value:function(e,t){if(!("number"!=typeof t||t<=0)){var r=this.getPlayerCache(e),i=r.maxSize;if(r.maxSize=t,i>t)for(;r.size()>t;){var n=r.items.pop();n&&delete this.bidIndex[n.videoCacheKey]}}}},{key:"getPlayerCacheCapacityPercentage",value:function(e){var t=this.getPlayerCache(e);return t&&0!==t.maxSize?Math.round(t.size()/t.maxSize*100):0}},{key:"isAnyCacheAtCapacityThreshold",value:function(){for(var e=0,t=Object.keys(this.playerCaches);e<t.length;e++){var r=t[e];if(this.getPlayerCacheCapacityPercentage(r)>=55)return!0}return!1}},{key:"isPlayerCacheAtCapacityThreshold",value:function(e){return this.getPlayerCacheCapacityPercentage(e)>=55}}])}());function J(){var e;"1"===new URLSearchParams(window.location.search).get("ez_vbf_debug")&&(e=console).log.apply(e,["[VideoBidFilter]"].concat(Array.prototype.slice.call(arguments)))}var Z=function(){var e,t="https://pbcache.ezoic.com/cache";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&"true"!==(null===(e=window.__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.PrebidServerEu)&&"US"!=_ezaq.country&&"CA"!=_ezaq.country&&(t="https://prebid.adnxs.com/pbc/v1/cache"),t}();function Y(e){if(!e)return{vastXml:null,contentFound:!1};if(e.vastXml)return{vastXml:e.vastXml,contentFound:!0};if(e.vastUrl){if(function(e){try{if(!e||"string"!=typeof e)return!1;if(!e.startsWith("data:text/xml;base64,"))return!1;var t=e.split(",")[1],r=atob(t.split("?")[0]);return r.trim().startsWith("<")&&(r.includes("<VAST")||r.includes("<vast")||r.includes("<Vast")||r.includes("<?xml"))}catch(e){return!1}}(e.vastUrl))try{J("Found base64 encoded VAST XML in vastUrl for bid from ".concat(e.bidder));var t=atob(e.vastUrl.split(",")[1].split("?")[0]);return e.vastXml=t,{vastXml:t,contentFound:!0}}catch(e){J("Error decoding base64 vastUrl: ".concat(e.message))}J("Creating VAST wrapper for bid from ".concat(e.bidder," with vastUrl"));var r=(i=e.vastUrl,o=(n=(n=e.vastImpUrl)&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(i,"]]></VASTAdTagURI>\n        ").concat(o,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));return e.vastXml=r,{vastXml:r,contentFound:!0}}var i,n,o;return{vastXml:null,contentFound:!1}}function X(e){return $.apply(this,arguments)}function $(){return($=y(w().mark((function e(t){var r,i,n,o,a,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return J("Cannot cache bid externally, missing required data (bid is null or undefined)"),e.abrupt("return",null);case 3:if(r=Y(t),i=r.vastXml,r.contentFound){e.next=7;break}return J("Cannot cache bid externally, no VAST content found",t),e.abrupt("return",null);case 7:return e.prev=7,n={puts:[{type:"xml",value:i,ttlseconds:Number(t.ttl)+15}]},e.next=11,fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 11:if((o=e.sent).ok){e.next=14;break}throw new Error("HTTP error ".concat(o.status));case 14:return e.next=16,o.json();case 16:if((a=e.sent)&&a.responses&&a.responses.length){e.next=19;break}throw new Error("Invalid response from cache server");case 19:return s=a.responses[0].uuid,J("Successfully cached bid externally, cache key: ".concat(s)),e.abrupt("return",s);case 24:return e.prev=24,e.t0=e.catch(7),J("Error caching bid externally: ".concat(e.t0.message)),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}function Q(e,t){if(!e||!t)return e;if(e.videoCacheKey=t,e.ezVideoCacheKey=t,e.adserverTargeting){e.adserverTargeting.hb_cache_id=t,e.adserverTargeting.hb_uuid=t;var r=new URL(Z);e.adserverTargeting.hb_cache_host=r.host,e.adserverTargeting.hb_cache_path=r.pathname}return e}function ee(e){return te.apply(this,arguments)}function te(){return(te=y(w().mark((function e(t){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:return r=e.sent,Q(t,r),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=y(w().mark((function e(t){var r,i,n,o,a,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return J("bid is null or undefined"),e.abrupt("return",t);case 3:if(n=ie(t.adUnitCode)){e.next=6;break}return e.abrupt("return",t);case 6:if((o=(null===(r=__ez)||void 0===r||null===(r=r.vhb)||void 0===r?void 0:r.breaks[t.adUnitCode])||(null===(i=__ez)||void 0===i||null===(i=i.vhb)||void 0===i?void 0:i.floatingBreaks[t.adUnitCode]))&&!t.mediaTypes&&"video"===t.mediaType&&(t.mediaTypes={},t.mediaTypes.video=o.prebidParams),!ne(t)){e.next=11;break}return J("Bid from ".concat(t.bidder," with CPM $").concat(t.cpm," is excluded due to advertiser rule for player ").concat(n)),e.abrupt("return",t);case 11:if(!(K.isWorthCaching(n,t)&&t.cpm>0)){e.next=30;break}if(J("Adding high value bid from ".concat(t.bidder," with CPM $").concat(t.cpm," to priority queue for player ").concat(n)),"video"!==t.mediaType){e.next=26;break}if(!(t&&t.vastUrl&&t.vastUrl.startsWith(Z))){e.next=20;break}a=new URL(t.vastUrl),(s=a.searchParams.get("uuid"))&&(t=Q(t,s)),e.next=24;break;case 20:if(t.vastUrl&&t.vastUrl.startsWith(Z)){e.next=24;break}return e.next=23,ee(t);case 23:t=e.sent;case 24:e.next=27;break;case 26:J("Received ".concat(t.mediaType," bid for player ").concat(n));case 27:K.addBid(n,t),e.next=34;break;case 30:__ez.vbf.filteredBidCount||(__ez.vbf.filteredBidCount={}),__ez.vbf.filteredBidCount[n]||(__ez.vbf.filteredBidCount[n]=0),__ez.vbf.filteredBidCount[n]++,J("Skipping bid from ".concat(t.bidder," with CPM $").concat(t.cpm," for player ").concat(n,", total bids filtered: ").concat(__ez.vbf.filteredBidCount[n]));case 34:return e.abrupt("return",t);case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){if(!e)return null;if(e.startsWith("ez-"))return e.split("$")[0];if(e.includes("prebid-video-")){var t=e.match(/prebid-video-(instream|outstream)([^_]*)/);if(t)return"outstream"===t[1]?"ez-o":"ez-i"}return e}function ne(e){if(!e||!e.meta)return!1;var t=[];if("undefined"!=typeof __advertiserRule&&(t=__advertiserRule),void 0!==e.meta.advertiserDomains&&t.length>0){var r=e.meta.advertiserDomains,i=function(e,t,r){for(var i=0;i<e;i++)if(t[i].length>0)for(var n=0;n<r.length;n++)if(t[i].includes(r[n]))return!0;return!1}(t.length,t,r);if(!0===i)return!0}return!1}const oe={initVideoBidFilter:function(){return J("Initializing video bid filter with VideoBidCache integration"),{getCache:function(){return K}}},videoBidCache:K,cacheExternally:X,getVastToCache:Y,cacheExternallyAndUpdateTargeting:ee,cacheOrFilterBid:function(e){return re.apply(this,arguments)}};function ae(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return se(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var ce=new WeakSet,pe=function(){return d((function e(){var t,r,i,n;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=ce),n.add(i),(null!==(t=window.__ezInstream)&&void 0!==t&&null!==(t=t.apsSlot)&&void 0!==t&&t.slotID||null!==(r=window.__ezOutstream)&&void 0!==r&&null!==(r=r.apsSlot)&&void 0!==r&&r.slotID)&&le(ce,this,me).call(this)}),[{key:"fetchBids",value:function(e,t,r){var i=r&&e.isOutstream&&le(ce,this,be).call(this);return e.hadAPSBid||i?(i&&C("APS auction skipped for outstream break due to single APS auction test"),Promise.resolve()):le(ce,this,fe).call(this,e,t)}}])}();function fe(e,t){var r=this,i=e.videoAdBidFloor;if(e.bidFloorAction&&(i=e.bidFloorAction.apsFloor),void 0!==e.videoAdBidFloorAmazon&&e.videoAdBidFloorAmazon>0&&(i=e.videoAdBidFloorAmazon),C("unmodified bid floor"+e.videoAdBidFloorUnmodified+"vid floor"+i+" bidcount "+e.apsBidCount),e.apsBidCount>0)return C("Already requested APS bid for this adBreak, returning"),Promise.reject();var n=30;e&&e.prebidParams&&e.prebidParams.hasOwnProperty("maxduration")&&(n=e.prebidParams.maxduration);var o=e.isOutstream?__ezOutstream:__ezInstream;return o.apsSlot.slotID?(le(ce,this,me).call(this),C("Setting up APS"),new Promise(function(){var a=y(w().mark((function a(s,d){var u,l,c,p,f,h;return w().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x("ez_aps",12e4,100).catch((function(){d("APS timed out")}));case 2:if(u=function(t){return ue({id:t.slotID,video:{startdelay:e.prebidParams.startdelay,plcmt:e.prebidParams.plcmt,pos:e.prebidParams.pos,w:e.prebidParams.w,h:e.prebidParams.h},sizes:t.sizes},i>0&&{bidfloor:Math.round(100*i),bidfloorcur:"USD"})},(l=o.apsSlot).slotID){a.next=8;break}return C("No APS slot ID"),d("No APS slot ID"),a.abrupt("return");case 8:if(c=[],void 0!==o.allApsSlots&&o.allApsSlots.length>0){for(p=0;p<o.allApsSlots.length;p++)(f=o.allApsSlots[p]).Duration<=n&&c.push(u(f.Slot));0===c.length&&c.push(u(l))}else c.push(u(l));return a.prev=11,ez_aps.record("ad/slot/define",{imp:c}),C("APS requesting bids for key =",e.key),h=c.map((function(e){return e.id})),a.next=17,le(ce,r,he).call(r,c,h,e,t,true);case 17:if(!a.sent.success){a.next=22;break}return C("APS bid successful at floor:",i),s(),a.abrupt("return");case 22:C("No APS bids received for adBreak"),s(),a.next=30;break;case 26:a.prev=26,a.t0=a.catch(11),C("Error during APS bidding:",a.t0),s();case 30:case"end":return a.stop()}}),a,null,[[11,26]])})));return function(e,t){return a.apply(this,arguments)}}())):(C("No APS slots"),Promise.reject())}function he(e,t,r,i,n){return ve.apply(this,arguments)}function ve(){return(ve=y(w().mark((function e(t,r,i,o,a){var s,d,u,l,c,p,f,h,v,m,b,y,g,_,B,k,O,P,S,z;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){if("string"!=typeof e)return 30;var t=e.match(/(\d+)-(\d+)seconds/);return t?parseInt(t[2],10):30},e.prev=1,e.next=4,ez_aps.record("ad/slot/define",{imp:t});case 4:return c=new Promise((function(e,t){l=setTimeout((function(){t(new Error("APS bid timeout"))}),o)})),e.prev=5,e.next=8,Promise.race([ez_aps.record("ad/targeting/fetch",{itemIds:r,params:{iid1:i.impressionId}}),c]);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(5),C("APS request failed:",e.t0.message||String(e.t0)),clearTimeout(l),e.abrupt("return",{success:!1});case 16:clearTimeout(l),C("APS fetch completed"),p=ez_aps.read("ad/targeting"),f=n(p.keys()).filter((function(e){return r.includes(e)})),null===(d=window.__ezDevtools)||void 0===d||null===(u=d.addAmazonImpression)||void 0===u||u.call(d,{impressionId:i.impressionId,items:t.map((function(e){return{slot:e,targetingData:Object.fromEntries((null==p?void 0:p.get(e.id))||[])}}))}),h=ae(f),e.prev=22,h.s();case 24:if((v=h.n()).done){e.next=62;break}if(m=v.value,!a){e.next=54;break}if(b=void 0,y=[],!(g=p.get(m))||!g.has("amznbid")){e.next=46;break}return e.prev=31,e.next=34,__ez.fads.getAmazonBidFromHash(g.get("amznbid"));case 34:_=e.sent,B="",k=ae(g);try{for(k.s();!(O=k.n()).done;)P=O.value,B+="&".concat(P[0],"=").concat(P[1])}catch(e){k.e(e)}finally{k.f()}S={slotID:m,amzniid:g.get("amzniid"),amznbid:g.get("amznbid"),bidVal:_,bps:_/s(m),encodedQsParams:encodeURIComponent(B)},y.push(S),(!b||S.bps>b.bps)&&(b=S),e.next=46;break;case 43:e.prev=43,e.t1=e.catch(31),C("Error processing APS bid",e.t1);case 46:if(!b){e.next=52;break}return C("Highest APS bid returned: ",b),i.apsBid=b,i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 52:e.next=60;break;case 54:if(!(z=p.get(m))||!z.has("amznbid")){e.next=60;break}return i.apsBid={slotID:m,amznbid:z.get("amznbid")},i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 60:e.next=24;break;case 62:e.next=67;break;case 64:e.prev=64,e.t2=e.catch(22),h.e(e.t2);case 67:return e.prev=67,h.f(),e.finish(67);case 70:return e.abrupt("return",{success:!1});case 73:return e.prev=73,e.t3=e.catch(1),C("Error in fetchAPSBids:",e.t3),e.abrupt("return",{success:!1});case 77:case"end":return e.stop()}}),e,null,[[1,73],[5,10],[22,64,67,70],[31,43]])})))).apply(this,arguments)}function me(){"undefined"==typeof __ez||void 0===__ez.fads||void 0===__ez.fads.amznH2Bid||__ez.fads.amznH2Bid.loaded||"function"==typeof __ez.fads.loadLibrary&&__ez.fads.loadLibrary(__ez.fads.amznH2Bid.url,"amznH2Bid")}function be(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vamacsaa)}function ye(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}var Be=function(){return d((function e(t){o(this,e),this.bidderName=t}),[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"applyAbTestParams",value:function(e,t){var r,i;if(e.bidder.includes("ttd"))return e;var n,o,a=t.isOutstream,s=t.player;return"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&!a&&null!=s&&s.isCurrentlyFloating()&&3===(null===(n=e.params)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.pos)&&(e.params.video.pos=2),"1"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vappp)&&(null==e||null===(o=e.params)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.pos)>1&&(e.params.video.pos=1),e}},{key:"convertPlcmtToPlacement",value:function(e){return 1==e||2==e?1:5}},{key:"getBidFloor",value:function(e){return 0}},{key:"setBidFloor",value:function(e,t){return e}}])}();function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}var Oe=function(e){function t(){return o(this,t),e=this,i=["33across"],r=ge(r=t),ye(e,ke()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r,i=t.isOutstream,n=t.prebidParams,o=t.shouldSendBidFloor,a=t.floorVal;return o&&a>0&&(e.getFloor=function(){return{currency:"USD",floor:a}}),i&&("instream"===(null===(r=e.params)||void 0===r?void 0:r.productId)&&4===(null==n?void 0:n.plcmt)&&(e.params.productId="siab"),e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}}])}(Be);function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}var Se=function(e){function t(){return o(this,t),e=this,i=["amx"],r=ge(r=t),ye(e,Pe()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.floor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ze=function(){return!!e})()}var Ae=function(e){function t(){return o(this,t),e=this,i=["amx"],r=ge(r=t),ye(e,ze()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(Be);function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ie=function(){return!!e})()}var xe=function(e){function t(){return o(this,t),e=this,i=["appnexus"],r=ge(r=t),ye(e,Ie()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.minDur,a=t.maxDur,s=t.skippable,d=t.timeOffset,u=this.getContextParamValue(d,n);return r&&i>0&&(e.params.reserve=i),e.params.video||(e.params.video={}),e.params.video.context=u,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=o,e.params.video.maxduration=a,e.params.video.skippable=s,n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.reserve=t),e}}])}(Be);function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}var Fe=function(e){function t(){return o(this,t),e=this,i=["cadentaperturemx"],r=ge(r=t),ye(e,Ce()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i.toString()),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return parseFloat(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t.toString()),e}}])}(Be);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}var Re=function(e){function t(){return o(this,t),e=this,i=["criteo"],r=ge(r=t),ye(e,Ue()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.shouldSendBidFloor,n=t.floorVal;return i&&n>0&&(e.params.bidFloor=n,e.params.bidFloorCur="USD"),e.params.video=Te(Te({},U(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(Be);function Ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ee=function(){return!!e})()}var Me=function(e){function t(){return o(this,t),e=this,i=["criteo"],r=ge(r=t),ye(e,Ee()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return e.params.zoneId&&delete e.params.zoneId,r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(Be);function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Le=function(e){function t(){return o(this,t),e=this,i=["inmobi"],r=ge(r=t),ye(e,De()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(Be);function Ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ve=function(){return!!e})()}var He=function(e){function t(){return o(this,t),e=this,i=["insticator"],r=ge(r=t),ye(e,Ve()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}var qe=function(e){function t(){return o(this,t),e=this,i=["insticator"],r=ge(r=t),ye(e,Ne()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.floor=i),e.params.publisherId||(e.params.publisherId="ezoic"),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function We(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(We=function(){return!!e})()}var Ke=function(e){function t(){return o(this,t),e=this,i=["ix"],r=ge(r=t),ye(e,We()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.shouldSendBidFloor,n=t.floorVal;return i&&n>0&&(e.params.bidFloor=n,e.params.bidFloorCur="USD"),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},U(r)),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t,e.params.bidFloorCur="USD"),e}}])}(Be);function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}var Xe=function(e){function t(){return o(this,t),e=this,i=["ix"],r=ge(r=t),ye(e,Ye()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=Ze(Ze({},U(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),Array.isArray(e.params.video.protocols),e.params.video.protocols=[2,3,5,6],e}}])}(Be);function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qe=function(){return!!e})()}var et=function(e){function t(){return o(this,t),e=this,i=["medianet"],r=ge(r=t),ye(e,Qe()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.isOutstream;return r&&i>0&&(e.params.bidfloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},U(n)),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(Be);function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tt=function(){return!!e})()}var rt=function(e){function t(){return o(this,t),e=this,i=["minutemedia"],r=ge(r=t),ye(e,tt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){return t.isOutstream&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}}])}(Be);function it(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(it=function(){return!!e})()}var nt=function(e){function t(){return o(this,t),e=this,i=["onetag"],r=ge(r=t),ye(e,it()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.shouldForceFloors,o=t.isOutstream;return r&&i>0&&n&&(e.getFloor=function(){return{currency:"USD",floor:i}}),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){return null!=e&&e.getFloor?e.getFloor().floor:0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.getFloor=function(){return{currency:"USD",floor:t}}),e}}])}(Be);function ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ot=function(){return!!e})()}var at=function(e){function t(){return o(this,t),e=this,i=["openx"],r=ge(r=t),ye(e,ot()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.customFloor=i),n&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.customFloor=t),e}}])}(Be);function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ut=function(){return!!e})()}var lt=function(e){function t(){return o(this,t),e=this,i=["pubmatic"],r=ge(r=t),ye(e,ut()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.isOutstream;return r&&i>0&&(e.params.kadfloor=i.toString()),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=dt(dt({},U(n)),{},{placement:this.convertPlcmtToPlacement(n.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return null!=e&&null!==(t=e.params)&&void 0!==t&&t.kadfloor?parseFloat(e.params.kadfloor):0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.kadfloor=t.toString()),e}}])}(Be);function ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ct=function(){return!!e})()}var pt=function(e){function t(){return o(this,t),e=this,i=["rubicon"],r=ge(r=t),ye(e,ct()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language,n=(t.skippable,t.shouldSendBidFloor),o=t.floorVal;return n&&o>0&&(e.params.floor=o),r&&"undefined"!=typeof _ezaq&&"US"!==_ezaq.country&&(e.params.floor=.1),r?e.params.video={playerWidth:400,playerHeight:300}:(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ft=function(){return!!e})()}var ht=function(e){function t(){return o(this,t),e=this,i=["rubicon"],r=ge(r=t),ye(e,ft()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language,n=t.skippable,o=t.shouldSendBidFloor,a=t.floorVal;return o&&a>0&&(e.params.floor=a),r&&"undefined"!=typeof _ezaq&&"US"!==_ezaq.country&&(e.params.floor=.1),r?(e.params.video={playerWidth:400,playerHeight:300,size_id:203},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}):(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480,e.params.video.size_id=201,e.params.video.skip=n?1:0,n&&(e.params.video.skipdelay=5)),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vt=function(){return!!e})()}var mt=function(e){function t(){return o(this,t),e=this,i=["sharethrough"],r=ge(r=t),ye(e,vt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var yt=function(e){function t(){return o(this,t),e=this,i=["smartadserver"],r=ge(r=t),ye(e,bt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.timeOffset;return r&&i>0&&(e.params.bidfloor=i),n||(e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(o)}),e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(Be);function gt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(gt=function(){return!!e})()}var _t=function(e){function t(){return o(this,t),e=this,i=["smartadserver"],r=ge(r=t),ye(e,gt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.timeOffset;return r&&i>0&&(e.params.bidfloor=i),e.params&&["networkId","siteId","pageId","formatId"].forEach((function(t){e.params[t]&&"string"==typeof e.params[t]&&(e.params[t]=parseInt(e.params[t],10))})),n?e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}:e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(o)},e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(Be);function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}var Bt=function(e){function t(){return o(this,t),e=this,i=["sonobi"],r=ge(r=t),ye(e,wt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.floor=t),e}}])}(Be);function kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kt=function(){return!!e})()}var Ot=function(e){function t(){return o(this,t),e=this,i=["sonobi"],r=ge(r=t),ye(e,kt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return!e.params.hasOwnProperty("TagID")&&e.params.hasOwnProperty("placement_id")&&(e.params.TagID=e.params.placement_id,delete e.params.placement_id),r&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(Be);function Pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zt=function(){return!!e})()}var At=function(e){function t(){return o(this,t),e=this,i=["sovrn"],r=ge(r=t),ye(e,zt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.bidfloor=i),e.params.video=St(St({},U(n)),{},{placement:this.convertPlcmtToPlacement(n.placement)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidfloor=t),e}}])}(Be);function It(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(It=function(){return!!e})()}var xt=function(e){function t(){return o(this,t),e=this,i=["triplelift"],r=ge(r=t),ye(e,It()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.floor=i),n&&1!==n.plcmt&&(e.params||(e.params={}),e.params.inventoryCode="ezoic_RON_outstream"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(n.plcmt),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(Be);function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}var Ft=function(e){function t(){return o(this,t),e=this,i=["triplelift"],r=ge(r=t),ye(e,Ct()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.isOutstream;return r&&i>0&&(e.params.floor=i),n&&1!==n.plcmt&&(e.params.inventoryCode="ezoic_RON_outstream_PbS2S"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(n.plcmt),o&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(Be);function jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jt=function(){return!!e})()}var Tt=function(e){function t(){return o(this,t),e=this,i=["ttd"],r=ge(r=t),ye(e,jt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.floorVal;return Math.random()<.2&&r>0&&(e.params.bidfloor=r),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.bidfloor=t),e}}])}(Be);function Ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ut=function(){return!!e})()}var Rt=function(e){function t(){return o(this,t),e=this,i=["unruly"],r=ge(r=t),ye(e,Ut()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&i>0&&(e.params.floor=i),e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),n&&(e.params.featureOverrides={canRunUnmissable:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params||(e.params={}),e.params.floor=t),e}}])}(Be);function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Et=function(){return!!e})()}var Mt=function(e){function t(){return o(this,t),e=this,i=["unruly"],r=ge(r=t),ye(e,Et()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream;return e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),r&&(e.params.featureOverrides={canRunUnmissable:!0},e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e}}])}(Be);function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lt=function(){return!!e})()}var Vt=function(e){function t(){return o(this,t),e=this,i=["vidazoo"],r=ge(r=t),ye(e,Lt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.playerWidth,a=t.playerHeight;r&&"number"==typeof i&&i>0&&(e.params.bidFloor=i);var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[o||400,a||300]]},n);return e.params.ext={customParameters:{mediaTypes:{video:s}}},e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return"number"==typeof t&&t>0&&(e.params||(e.params={}),e.params.bidFloor=t),e}}])}(Be);function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nt=function(){return!!e})()}var qt=function(e){function t(){return o(this,t),e=this,i=["yieldmo"],r=ge(r=t),ye(e,Nt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.bidFloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},U(n)),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}},{key:"setBidFloor",value:function(e,t){return t>0&&(e.params.bidFloor=t),e}}])}(Be);function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kt=function(){return!!e})()}var Jt=function(e){function t(){return o(this,t),e=this,i=["yieldmo"],r=ge(r=t),ye(e,Kt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=Wt(Wt({},U(r)),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],e}}])}(Be);function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}var Yt=function(e){function t(){return o(this,t),e=this,i=["noop"],r=ge(r=t),ye(e,Zt()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){return 0}}])}(Be),Xt=function(){function e(){o(this,e)}return d(e,null,[{key:"getStrategy",value:function(t){var r,i=null!==(r=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,$t)._.get(t))&&void 0!==r?r:Yt;return new i}}])}(),$t={_:new Map([["33across",Oe],["33across_i_s2s",Oe],["33across_o_s2s",Oe],["amx",Se],["amx_i_s2s",Ae],["amx_o_s2s",Ae],["appnexus",xe],["appnexus_i_s2s",xe],["appnexus_o_s2s",xe],["cadent_aperture_mx",Fe],["cadent_aperture_mx_i_s2s",Fe],["cadent_aperture_mx_o_s2s",Fe],["criteo",Re],["criteo_i_s2s",Me],["criteo_o_s2s",Me],["inmobi",Le],["inmobi_i_s2s",Le],["inmobi_o_s2s",Le],["insticator",He],["insticator_i_s2s",qe],["insticator_o_s2s",qe],["ix",Ke],["ix_i_s2s",Xe],["ix_o_s2s",Xe],["medianet",et],["medianet_i_s2s",et],["medianet_o_s2s",et],["minutemedia",rt],["onetag",nt],["onetag_i_s2s",nt],["onetag_o_s2s",nt],["openx",at],["openx_i_s2s",at],["openx_o_s2s",at],["pubmatic",lt],["pubmatic_i_s2s",lt],["pubmatic_o_s2s",lt],["rubicon",pt],["rubicon_i_s2s",ht],["rubicon_o_s2s",ht],["sharethrough",mt],["sharethrough_i_s2s",mt],["sharethrough_o_s2s",mt],["smartadserver",yt],["smartadserver_i_s2s",_t],["smartadserver_o_s2s",_t],["sonobi",Bt],["sonobi_i_s2s",Ot],["sonobi_o_s2s",Ot],["sovrn",At],["sovrn_i_s2s",At],["sovrn_o_s2s",At],["triplelift",xt],["triplelift_i_s2s",Ft],["triplelift_o_s2s",Ft],["ttd",Tt],["unruly",Rt],["unruly_i_s2s",Mt],["unruly_o_s2s",Mt],["vidazoo",Vt],["yieldmo",qt],["yieldmo_i_s2s",Jt],["yieldmo_o_s2s",Jt]])},Qt=function(){return d((function e(){o(this,e)}),[{key:"calculate",value:function(e,t,r){throw new Error("calculate method must be implemented")}},{key:"getMinFloorValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.minFloor?e.minFloor:I()}},{key:"roundByTier",value:function(e){return e<=I()?I():e<.5?.01*Math.ceil(e/.01):e<1?.1*Math.round((e+1e-6)/.1):e<5?.25*Math.round((e+1e-6)/.25):e<10?.5*Math.round((e+1e-6)/.5):Math.round(e+1e-6)}}])}();function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(er=function(){return!!e})()}var tr=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,er()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=(t-1)/2,a=e+e/o*(r-o);return Math.max(n,a)}}])}(Qt);function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rr=function(){return!!e})()}var ir=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,rr()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=e/Math.pow(2,(t-1)/2)*Math.pow(2,r);return Math.max(n,o)}}])}(Qt);function nr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nr=function(){return!!e})()}var or=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,nr()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i),o=Math.floor(t/2),a=e/Math.pow(1.5,o)*Math.pow(1.5,r);return Math.max(n,a)}}])}(Qt);function ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ar=function(){return!!e})()}var sr=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,ar()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),.5);return Math.max(n,a)}}])}(Qt);function dr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dr=function(){return!!e})()}var ur=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,dr()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return Math.max(n,e);var o=.5*e,a=o+(3*e-o)*Math.pow(r/(t-1),2);return Math.max(n,a)}}])}(Qt);function lr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(lr=function(){return!!e})()}var cr=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,lr()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i.bidHistory,o=i.bidder,a=i.strategyName,s=this.getMinFloorValue(i);if(!n||0===Object.keys(n).length)return Math.max(s,e);var d=36e5,u=Date.now();if(o&&n[o]&&a===A.HISTORICAL_BIDDER)return this.calculateBidderSpecificFloor(o,n[o],e,t,r,u,d,i);var l=0,c=0;Object.values(n).forEach((function(e){e.bids.forEach((function(e){if(u-e.timestamp<=d){var t=e.wasWinner?2:1;c+=e.cpm*t,l+=t}}))}));var p=l>0?c/l:e,f=Math.floor(t/2);if(r===f)return Math.max(s,p);var h=1.5*p/(t-1);return Math.max(s,Math.max(.5*p,p+(r-f)*h))}},{key:"calculateBidderSpecificFloor",value:function(e,t,r,i,n,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=0,u=0,l=0,c=this.getMinFloorValue(s),p=t.bids.filter((function(e){return o-e.timestamp<=a}));if(0===p.length)return Math.max(c,r);p.forEach((function(e){var t=e.wasWinner?2:1;u+=e.cpm*t,d+=t,e.wasWinner&&l++}));var f,h=u/d;f=(l/=p.length)>.7?.9*h:l>.3?.75*h:.6*h,f=Math.max(.8*r,f);var v=Math.floor(i/2);if(n===v)return Math.max(c,f);var m=1.5*f/(i-1);return Math.max(c,Math.max(.5*f,f+(n-v)*m))}}])}(Qt);function pr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pr=function(){return!!e})()}var fr=function(e){function t(){return o(this,t),e=this,i=arguments,r=ge(r=t),ye(e,pr()?Reflect.construct(r,i||[],ge(e).constructor):r.apply(e,i));var e,r,i}return we(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.getMinFloorValue(i);if(t<=1)return this.roundByTier(Math.max(n,e));if(0===r)return this.roundByTier(n);if(r>=t-1)return this.roundByTier(Math.max(n,e));var o=r/(t-1),a=e*Math.pow(o,3),s=Math.max(n,a);return this.roundByTier(s)}}])}(Qt);function hr(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var vr=function(){function e(){o(this,e)}return d(e,null,[{key:"getStrategy",value:function(t){return hr(e,this,mr)._[t]||new tr}},{key:"hasStrategy",value:function(t){return t in hr(e,this,mr)._}}])}(),mr={_:g(g(g(g(g(g(g(g({},A.UNIFORM,new tr),A.EXPONENTIAL,new ir),A.GEOMETRIC,new or),A.HIGH_END,new sr),A.LOW_END,new ur),A.HISTORICAL,new cr),A.HISTORICAL_BIDDER,new cr),A.RAMP_UP,new fr)};function br(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var yr=new WeakSet;function gr(e){var t=e.shouldSendBidFloor,r=e.adUnitIndex,i=e.numAdUnits,n=e.forceOutstreamCtx,o=void 0!==n&&n,a=e.placement,s=void 0===a?void 0:a,d=e.isTTD,u=void 0!==d&&d,l=e.customBidPoolIdSuffix,c=void 0===l?"":l,p={code:this.key,ortb2Imp:{ext:{gpid:this.gpid},rwdd:this.isRewarded?1:0},mediaTypes:{video:U(this.prebidParams)}};void 0!==s&&(p.mediaTypes.video.placement=s),o&&1!==this.prebidParams.plcmt&&(p.mediaTypes.video.context="outstream");var f=!!s;return p.bidPoolId=this.getPoolId(r,f,c),this.setAdUnitFloor(t,!1,p,r,i),u?(delete p.mediaTypes.video.placement,delete p.ortb2Imp.rwdd):this.updateAdUnitForAbTests(p),p}function _r(e,t,r,i,n,o){var a=this,s=br(yr,this,kr).call(this,{code:this.key,bidPoolId:this.getPoolId(t)},t,r,e),d=[];(this.isMultiformatBannerEnabled||this.isMultiformatNativeEnabled)&&this.isOutstream&&(d=s.filter((function(e){return a.willBidOnMultiFormat[e.bidder]})),s=s.filter((function(e){return!d.includes(e)}))),br(yr,this,wr).call(this,s,e,t,r,i,n,o),this.isOutstream&&d.length>0&&br(yr,this,Br).call(this,d,e,t,r,i,n,o)}function wr(e,t,r,i,n,o,a){var s=this,d=e.filter((function(e){return s.shouldSendPlacement[e.bidder]&&br(yr,s,Cr).call(s,e.bidder,s.isOutstream)})),u=e.filter((function(e){return!s.shouldSendPlacement[e.bidder]&&!br(yr,s,Cr).call(s,e.bidder,s.isOutstream)})),l=e.filter((function(e){return s.shouldSendPlacement[e.bidder]&&!br(yr,s,Cr).call(s,e.bidder,s.isOutstream)})),c=e.filter((function(e){return br(yr,s,Cr).call(s,e.bidder,s.isOutstream)&&!s.shouldSendPlacement[e.bidder]}));if(n){var p=function(e){return a?e.filter((function(e){return n[e.bidder]})):e.filter((function(e){return!n[e.bidder]}))};u=p(u),l=p(l),c=p(c),d=p(d)}var f=new Set(["ttd","ttd_i_s2s","ttd_o_s2s"]),h=u.filter((function(e){return f.has(e.bidder)})),v=u.filter((function(e){return!f.has(e.bidder)}));if(v.length>0){var m=this.getPrebidAdUnit(t,r,i);m.bids=v,o.push(m)}if(h.length>0){var b=this.getPrebidAdUnitForTTD(t,r,i);b.bids=h,o.push(b)}if(l.length>0){var y=this.getPrebidAdUnitWithPlacement(t,r,i);y.bids=l,o.push(y)}if(c.length>0){var g=this.getPrebidAdUnitAlwaysOutstreamCtx(t,r,i);g.bids=c,o.push(g)}if(d.length>0){var _=this.getPrebidAdUnitAlwaysOutstreamWithPlacementCtx(t,r,i);_.bids=d,o.push(_)}}function Br(e,t,r,i,n,o,a){var s=this;if(0!==e.length){var d=e.filter((function(e){return!s.shouldSendPlacement[e.bidder]})),u=e.filter((function(e){return s.shouldSendPlacement[e.bidder]}));if(n){var l=function(e){return a?e.filter((function(e){return n[e.bidder]})):e.filter((function(e){return!n[e.bidder]}))};d=l(d),u=l(u)}if(d.length>0){var c=this.getPrebidMultiFormatAdUnit(t,r,i);c.bids=d,o.push(c)}if(u.length>0){var p=this.getPrebidMultiFormatAdUnit(t,r,i);p.mediaTypes.video.placement=br(yr,this,Fr).call(this,this.prebidParams.plcmt),p.bids=u,o.push(p)}}}function kr(e,t,r,i){var n,o,a,s,d=this,u=this.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders,l=this.playerId,c="undefined"!=typeof __ez&&"1"===(null===(n=__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.vabmf)||"2"===(null===(o=__ez)||void 0===o||null===(o=o.tf)||void 0===o?void 0:o.vabmf),p="undefined"!=typeof __ez&&"true"===(null===(a=__ez)||void 0===a||null===(a=a.tf)||void 0===a?void 0:a.mfof),f=K.isPlayerCacheAtCapacityThreshold(this.playerId),h="undefined"!=typeof __ez&&(null===(s=__ez)||void 0===s||null===(s=s.tf)||void 0===s?void 0:s.vafccss),v=!1;if("dynamic"===h||"dynamicfl"===h||"aggr"===h){var m,b=br(yr,this,Or).call(this),y=br(yr,this,zr).call(this,b);v=((null===(m=K.getPlayerCache(this.playerId))||void 0===m?void 0:m.size())||0)>=y}var g=!!(c||window.is_humix_app||f||v)||i,_={minDur:this.params.min/1e3,maxDur:this.params.max/1e3,skippable:this.params.skip,shouldSendBidFloor:g,prebidParams:this.prebidParams,isOutstream:this.isOutstream,language:this.videoLanguage,timeOffset:this.timeOffset||0,adUnit:e,playerId:l,player:R(l),shouldForceFloors:f||v};return u.map((function(e){var i=U(e);p&&Object.hasOwn(d.willBidOnMultiFormat,i.bidder)?_.shouldSendBidFloor=!0:_.shouldSendBidFloor=g;var n=Xt.getStrategy(i.bidder),o=br(yr,d,xr).call(d,t,r,i.bidder);return _.floorVal=o,n&&(i=n.applyBidParams(i,_),i=n.applyAbTestParams(i,_)),i}))}function Or(){var e,t,r=this.isOutstream?null===(e=__ezOutstream)||void 0===e?void 0:e.vatc:null===(t=__ezInstream)||void 0===t?void 0:t.vatc;return(null==r?void 0:r.bcds)||"d"}function Pr(){var e,t,r=this.isOutstream?null===(e=__ezOutstream)||void 0===e?void 0:e.vatc:null===(t=__ezInstream)||void 0===t?void 0:t.vatc;return(null==r?void 0:r.bcdsds)||"g"}function Sr(e,t){var r;return"t"===e&&!(this.isOutstream?this.shouldSendMultipleFloorsOutstream[t]:this.shouldSendMultipleFloorsInstream[t])&&"undefined"!=typeof _ezaq&&"US"===(null===(r=_ezaq)||void 0===r?void 0:r.country)}function zr(e){return"r"===e?5:7}function Ar(e){var t;return"t"!==e||"undefined"!=typeof _ezaq&&"US"===(null===(t=_ezaq)||void 0===t?void 0:t.country)}function Ir(e){var t="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafccss;if("dynamic"===t){var r,i=br(yr,this,Or).call(this),n=br(yr,this,Ar).call(this,i),o=(null===(r=K.getPlayerCache(this.playerId))||void 0===r?void 0:r.size())||0;if(o>=8&&n)return e*Math.min(1+.1*(o-7),1.75)}else if("dynamicfl"===t){var a,s=br(yr,this,Or).call(this),d=br(yr,this,Pr).call(this),u=br(yr,this,zr).call(this,s),l=br(yr,this,Ar).call(this,s),c=(null===(a=K.getPlayerCache(this.playerId))||void 0===a?void 0:a.size())||0;if("r"===s&&"d"!==d&&c<8)return e;if(c>u&&l)return e*Math.min(1+.1*(c-u),1.75)}else if("aggr"===t){var p,f=br(yr,this,Or).call(this),h=br(yr,this,Pr).call(this),v=br(yr,this,zr).call(this,f),m=br(yr,this,Ar).call(this,f),b=(null===(p=K.getPlayerCache(this.playerId))||void 0===p?void 0:p.size())||0;if("r"===f&&"d"!==h&&b<8)return e;if(b>v&&m){var y="r"===f?.15:.1,g="r"===f?2:1.75;return e*Math.min(1+y*(b-v),g)}}else{var _,w=(null===(_=K.getPlayerCache(this.playerId))||void 0===_?void 0:_.size())||0;if(w>=7)return e*Math.min(1+.1*(w-7),1.75)}return e}function xr(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.isOutstream&&null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.tf)&&void 0!==r&&r.vabo)return this.videoAdBidFloor;var n="undefined"!=typeof __ez&&__ez.tf&&__ez.tf.vafccss;if("dynamic"===n||"dynamicfl"===n||"aggr"===n){var o=br(yr,this,Or).call(this);if(i&&br(yr,this,Sr).call(this,o,i))return.02}var a=this.videoAdBidFloor;a=a>=0?a:0,a=br(yr,this,Ir).call(this,a);var s=A.UNIFORM,d=br(yr,this,jr).call(this);d&&A[d]&&(s=A[d]),s||(s=A.UNIFORM),window.is_humix_app&&(a*=.3,s=A.RAMP_UP);var u=vr.getStrategy(s),l={bidHistory:"undefined"!=typeof __ez&&__ez.vhb&&__ez.vhb.globalBidHistory?__ez.vhb.globalBidHistory:{},bidder:i,strategyName:s,minFloor:I(i,this.isOutstream)},c=t>0?t:1,p=e>=0?e:0,f=u.calculate(a,c,p,l);return Math.max(I(i,this.isOutstream),f)}function Cr(e,t){return!t&&this.shouldAlwaysSendOutstreamContext[e]}function Fr(e){return g(g(g({},1,1),2,1),4,5)[e]||5}function jr(){return this.isOutstream?"undefined"!=typeof __ezOutstream&&__ezOutstream.vatc&&__ezOutstream.vatc.fs?__ezOutstream.vatc.fs:null:"undefined"!=typeof __ezInstream&&__ezInstream.vatc&&__ezInstream.vatc.fs?__ezInstream.vatc.fs:null}const Tr=function(){return d((function e(t){var r,i;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=yr),i.add(r),this.key=t.key,this.gpid=t.gpid,this.breakID=t.breakID,this.prebidParams=t.prebidParams,this.videoAdBidFloor=t.videoAdBidFloor,this.isOutstream=t.isOutstream,this.isRewarded=t.isRewarded,this.params=t.params,this.timeOffset=t.timeOffset,this.isMultiformatBannerEnabled=t.isMultiformatBannerEnabled||!1,this.isMultiformatNativeEnabled=t.isMultiformatNativeEnabled||!1,this.adBreakPosition=t.adBreakPosition,this.playerId=t.playerId,this.videoLanguage=t.videoLanguage,this.shouldSendPlacement={"33across_i_s2s":!0,"33across_o_s2s":!0,criteo:!0,criteo_i_s2s:!0,criteo_o_s2s:!0,insticator_i_s2s:!0,insticator_o_s2s:!0,ix_i_s2s:!0,ix_o_s2s:!0,medianet:!0,pubmatic:!0,sovrn:!0,sovrn_i_s2s:!0,sovrn_o_s2s:!0,triplelift_o_s2s:!0,triplelift_i_s2s:!0,vidazoo:!0,vidazoo_i_s2s:!0,vidazoo_o_s2s:!0,yieldmo:!0,yieldmo_i_s2s:!0,yieldmo_o_s2s:!0},this.shouldSendMultipleFloorsInstream={appnexus:!0,medianet:!0,onetag:!0,openx:!0,rubicon:!0,sharethrough:!0,yieldmo:!0},this.shouldSendMultipleFloorsOutstream={onetag:!0,openx:!0,pubmatic:!0,rubicon:!0,sharethrough:!0},this.shouldAlwaysSendOutstreamContext={triplelift:!0,triplelift_i_s2s:!0},this.willBidOnMultiFormat={"33across":!0,"33across_o_s2s":!0,appnexus:!0,criteo:!0,criteo_o_s2s:!0,insticator:!0,insticator_o_s2s:!0,ix:!0,ix_o_s2s:!0,medianet:!0,medianet_o_s2s:!0,smartadserver:!0,smartadserver_o_s2s:!0,yieldmo:!0}}),[{key:"getMultipleAdUnits",value:function(e,t){var r=[],i=this.isOutstream?this.shouldSendMultipleFloorsOutstream:this.shouldSendMultipleFloorsInstream;br(yr,this,_r).call(this,!1,0,1,i,r,!1);for(var n=0;n<e;n++)br(yr,this,_r).call(this,t,n,e,i,r,!0);return r}},{key:"getPrebidAdUnit",value:function(e,t,r){return br(yr,this,gr).call(this,{shouldSendBidFloor:e,adUnitIndex:t,numAdUnits:r,forceOutstreamCtx:!1,isTTD:!1,customBidPoolIdSuffix:""})}},{key:"getPrebidAdUnitWithPlacement",value:function(e,t,r){return br(yr,this,gr).call(this,{shouldSendBidFloor:e,adUnitIndex:t,numAdUnits:r,placement:br(yr,this,Fr).call(this,this.prebidParams.plcmt),forceOutstreamCtx:!1,isTTD:!1,customBidPoolIdSuffix:""})}},{key:"getPrebidAdUnitAlwaysOutstreamCtx",value:function(e,t,r){return br(yr,this,gr).call(this,{shouldSendBidFloor:e,adUnitIndex:t,numAdUnits:r,forceOutstreamCtx:!0,isTTD:!1,customBidPoolIdSuffix:S})}},{key:"getPrebidAdUnitAlwaysOutstreamWithPlacementCtx",value:function(e,t,r){return br(yr,this,gr).call(this,{shouldSendBidFloor:e,adUnitIndex:t,numAdUnits:r,forceOutstreamCtx:!0,placement:br(yr,this,Fr).call(this,this.prebidParams.plcmt),isTTD:!1,customBidPoolIdSuffix:S})}},{key:"getPrebidAdUnitForTTD",value:function(e,t,r){return br(yr,this,gr).call(this,{shouldSendBidFloor:e,adUnitIndex:t,numAdUnits:r,forceOutstreamCtx:!1,isTTD:!0,customBidPoolIdSuffix:"_ttd"})}},{key:"getPrebidMultiFormatAdUnit",value:function(e,t,r){var i,n=this.getPrebidAdUnit(e,t,r),o={url:"https://cdn.jsdelivr.net/npm/in-renderer-js@1/dist/in-renderer.umd.min.js",render:function(e){(new window.InRenderer).render("ez-video-container",e,{onImpressionViewable:function(){window.dispatchEvent(new CustomEvent("ezVideoAdRendered",{detail:{adId:e.adId,bid:e}}))}})}},a=[300,250];return 2===(null===(i=_ezaq)||void 0===i?void 0:i.form_factor_id)&&(a=[200,200]),this.isMultiformatBannerEnabled&&(n.mediaTypes.banner={sizes:[a],renderer:o},n.floors&&n.floors.values&&n.floors.values["video|*"]&&(n.floors.values["banner|*"]=n.floors.values["video|*"])),this.isMultiformatNativeEnabled&&(n.mediaTypes.native={adTemplate:'<div style="width: 300px; height:250px; background-image: url(##hb_native_asset_id_1##);"></div>',ortb:{assets:[{id:1,required:1,img:{type:3,w:a[0],h:a[1]}}]},renderer:o},n.floors&&n.floors.values&&n.floors.values["video|*"]&&(n.floors.values["native|*"]=n.floors.values["video|*"])),n}},{key:"getPoolId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.isOutstream?"prebid-video-outstream":"prebid-video-instream"+this.adBreakPosition,n=t?"-placement":"";return"".concat(i).concat(n).concat(r,"_").concat(e)}},{key:"setAdUnitFloor",value:function(e,t,r,i,n){this.videoAdBidFloor>0&&e&&t&&(r.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":br(yr,this,xr).call(this,i,n)}})}},{key:"updateAdUnitForAbTests",value:function(e){var t,r;if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vappp)&&!this.isOutstream){var i=R(this.playerId);null!=i&&i.isCurrentlyFloating()&&3===e.mediaTypes.video.pos&&(e.mediaTypes.video.pos=2)}return"1"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&(e.mediaTypes.video.pos=1),e}}])}();function Ur(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var Rr=new WeakSet,Er=function(){return d((function e(){var t,r;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,r=Rr),r.add(t),F()&&epbjs.que.push((function(){epbjs.setConfig({debug:!1})}))}),[{key:"fetchBids",value:function(e,t){var r,i=this;C("startPrebidBidding");var n=e.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders;if(null==n||!n.length)return C("No Prebid bidders"),Promise.reject();if(!epbjs||!epbjs.requestBids||!epbjs.que)return C("something wrong with epbjs"),Promise.reject();Ur(Rr,this,Hr).call(this);var o=!(null!==(r=window.__ezInstream)&&void 0!==r&&r.DoNotPassBidFloorToPreBid),a=_ezaq.country||"US",s=1;"US"===a?s=5:{PR:!0,CA:!0,GB:!0,ES:!0,FR:!0,AU:!0,DE:!0,CH:!0,IE:!0,NL:!0,AE:!0,ZA:!0}[a]&&(s=2);var d=Ur(Rr,this,Mr).call(this,e,s,o);return Ur(Rr,this,Nr).call(this,e),new Promise((function(r,n){var o=setTimeout((function(){C("Prebid timed out"),n("Prebid timed out")}),12e4);epbjs.que.push((function(){C("Prebid.js requesting bids",d,"timeout",t);var n,a={timeout:t,adUnits:d,bidsBackHandler:(n=y(w().mark((function t(n,a,s){var d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return clearTimeout(o),C("Current ad break: ",e),C("Prebid received bids: ",n,"\nTimed Out: ",a,"\nAuction ID: ",s),d=n[e.key],t.next=6,Ur(Rr,i,Lr).call(i,d);case 6:d&&(e.prebidBids=d.bids,e.updatePrebidBidCacheWithBids(d.bids)),r({bids:(null==d?void 0:d.bids)||[],timedOut:a});case 8:case"end":return t.stop()}}),t)}))),function(e,t,r){return n.apply(this,arguments)}),labels:["iid1:".concat(e.impressionId)],ortb2:Ur(Rr,i,Dr).call(i,e)};epbjs.requestBids(a)}))}))}}])}();function Mr(e,t,r){var i={key:e.key,gpid:e.gpid,breakID:e.breakID,prebidParams:e.prebidParams,videoAdBidFloor:e.videoAdBidFloor,isOutstream:e.isOutstream,isRewarded:e.isRewarded,params:e.params,timeOffset:e.timeOffset,isMultiformatBannerEnabled:e.isMultiformatEnabled,isMultiformatNativeEnabled:e.isMultiformatEnabled,adBreakPosition:e.isOutstream?void 0:e.getAdBreakPosition(e.breakID),playerId:e.getPlayerId(),videoLanguage:e.getVideoLanguage(e.getPlayerId())},n=new Tr(i).getMultipleAdUnits(t,r);return e.prebidAdUnits=n,n}function Dr(e){try{var t=R(e.getPlayerId());if(t){var r,i,n=t.adRenderer.videoPlayer_.player.player;if(n.videos){var o=n.playlist.currentIndex();r=n.videos[o]}else r=t.adRenderer.videoPlayer_.videoObject.Video;if(r)return{site:{content:{id:r.VideoContentId,title:r.Title,cattax:6,cat:(null===(i=r.IABCategoryIds)||void 0===i?void 0:i.split(","))||[],keywords:r.Keywords,len:Math.round(r.VideoDurationMs/1e3),language:r.Language}}}}}catch(e){C("Error setting ORTB2",e)}return{}}function Lr(e){return Vr.apply(this,arguments)}function Vr(){return(Vr=y(w().mark((function e(t){var r,i,n,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null==t||null===(r=t.bids)||void 0===r?void 0:r.length)>1&&t.bids.sort((function(e,t){var r,i,n,o,a=null!==(r=null!==(i=e.cpm)&&void 0!==i?i:e.originalCpm)&&void 0!==r?r:0;return(null!==(n=null!==(o=t.cpm)&&void 0!==o?o:t.originalCpm)&&void 0!==n?n:0)-a})),i=0;case 2:if(!(i<(null==t||null===(n=t.bids)||void 0===n?void 0:n.length))){e.next=10;break}return o=t.bids[i],e.next=6,oe.cacheOrFilterBid(o);case 6:t.bids[i]=e.sent;case 7:i++,e.next=2;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(){var e,t,r,i;"undefined"!=typeof __ez&&!0===(null===(e=__ez)||void 0===e||null===(e=e.fads)||void 0===e||null===(e=e.adLoadHB)||void 0===e?void 0:e.loaded)&&!0===(null===(t=__ez)||void 0===t||null===(t=t.fads)||void 0===t?void 0:t.isJIT)&&!1===(null===(r=__ez)||void 0===r||null===(r=r.fads)||void 0===r||null===(r=r.adLoadHB)||void 0===r?void 0:r.preBidEventsSetup)&&"function"==typeof(null===(i=__ez)||void 0===i||null===(i=i.fads)||void 0===i||null===(i=i.adLoadHB)||void 0===i?void 0:i.setUpGlobalEvents)&&__ez.fads.adLoadHB.setUpGlobalEvents()}function Nr(e){var t;e.prebidNumBidsInCache=(null===(t=K.getPlayerCache(e.getPlayerId()))||void 0===t?void 0:t.size())||0}const qr=function(){return d((function e(){o(this,e),g(this,"breaks",{}),g(this,"floatingBreaks",{}),g(this,"target",new EventTarget),g(this,"biddingInProcess",{}),g(this,"bidderTimeoutMS",1800),g(this,"globalBidHistory",{}),g(this,"bidders",{}),g(this,"auctionsRun",0),g(this,"adsShown",0),g(this,"auctionPromiseByImpressionId",{}),g(this,"videoBidderAps",void 0),g(this,"videoBidderPrebid",void 0),this.videoBidderAps=new pe,this.videoBidderPrebid=new Er,this.initializeBidFilter(),this.bidSingle()}),[{key:"doAuction",value:function(e){var t,r,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.bidFloorAction&&(e.videoAdBidFloor=e.bidFloorAction.prebidFloor),(t=this.auctionPromiseByImpressionId)[r=e.impressionId]||(t[r]=y(w().mark((function t(){var r,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.biddingInProcess[e.getPlayerId()]=!0,i.auctionsRun++,(r=i.videoBidderPrebid.fetchBids(e,i.bidderTimeoutMS)).then((function(e){var t=e.bids,r=e.timedOut;t&&i.recordBidders(t),r&&(i.bidderTimeoutMS+=1200,C("Prebid timed out, incrementing timeout: ",i.bidderTimeoutMS))})),o=i.videoBidderAps.fetchBids(e,i.bidderTimeoutMS,n),t.abrupt("return",Promise.allSettled([r,o]));case 6:case"end":return t.stop()}}),t)})))())}},{key:"bid",value:(a=y(w().mark((function e(t,r){var i,n=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.biddingInProcess[t.getPlayerId()]=!0,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=6;break}return C("Handling custom breaks outstream collision"),e.next=5,this.handleCustomBreaksOutstreamCollision(t,r);case 5:return e.abrupt("return");case 6:if(!j()){e.next=12;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=O,this.dispatchRenderAdBreak(t),e.abrupt("return");case 12:i=r||!T(t.isOutstream),this.doAuction(t,!1).catch((function(e){C("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally((function(){C("Bidding finished");var e=t.getHighestBidWithSource();t.isOutstream&&e.source===P&&"video"!==e.format?(t.fillInAdBreakForMultiFormatAd(),n.dispatchRenderMultiformatAd(t)):(t.assembleTagURL(i),n.dispatchRenderAdBreak(t))}));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"bidWithoutRender",value:(n=y(w().mark((function e(t){var r,i,n=this,o=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]&&o[1],this.biddingInProcess[t.getPlayerId()]=!0,t.isRewarded=!0,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=8;break}return C("Handling custom breaks outstream collision"),e.next=7,this.handleCustomBreaksOutstreamCollision(t,r);case 7:return e.abrupt("return",t);case 8:if(!j()){e.next=13;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL=O,e.abrupt("return",t);case 13:return i=r||!T(t.isOutstream),e.abrupt("return",new Promise((function(e){n.doAuction(t,!1).catch((function(e){C("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally((function(){C("Bidding finished without render"),t.assembleTagURL(i),e(t)}))})));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"bidMultipleBreaks",value:function(e,t){var r,i=this;if(0!==e.length){"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vamauf)&&this.applyUnifiedFloor(e);var n=e.map((function(e){return i.doAuction(e,!0)}));Promise.allSettled(n).finally((function(){var r,n=null,o=-1,a=null;e.forEach((function(e){var t=e.getHighestBidWithSource();t.cpm>o&&(o=t.cpm,n=e,t.source),e.isOutstream||(a=e),e.isComplete=!0,e.isMultiAuction=1}));var s={};if(n){var d=t||!T(n.isOutstream);n.assembleTagURL(d),s.bestBreak=n}if(n&&n.isOutstream&&a){var u=t||!T(a.isOutstream);a.assembleTagURL(u),s.instreamBreak=a}if(!n&&a){var l=t||!T(a.isOutstream);a.assembleTagURL(l),s.bestBreak=a}null!==(r=window.__ezDevtools)&&void 0!==r&&r.addMultiAuction&&__ezDevtools.addMultiAuction(e.map((function(e){var t=e.getHighestBidWithSource(),r=t.cpm,i=t.source;return{impressionId:e.impressionId,cpm:r,source:i,isBest:e===s.bestBreak}}))),i.dispatchRenderMultipleAdBreaks(s)}))}}},{key:"applyUnifiedFloor",value:function(e){var t=-1,r="";e.forEach((function(e){e.videoAdBidFloor>t&&(t=e.videoAdBidFloor,r=e.videoAdBidHash)})),t>0&&(e.forEach((function(e){e.videoAdBidFloor=t,e.videoAdBidHash=r})),C("Multi-auction using highest floor: ".concat(t," with bid hash: ").concat(r)))}},{key:"addListener",value:function(e,t){this.target.addEventListener(e,t)}},{key:"dispatchRenderAdBreak",value:function(e){var t=new Event("RenderAdBreak");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultipleAdBreaks",value:function(e){var t=new Event("RenderAdBreak");t.AdBreaks=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultiformatAd",value:function(e){var t=new Event("RenderMultiformatAd");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"getBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)}))}},{key:"getFloatingBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.floatingBreaks).filter((function(e){return e.key.includes(r)}))}},{key:"getIncompleteBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)&&!e.isComplete}))}},{key:"requestBreaks",value:(i=y(w().mark((function t(r,i,n,o,a,s,d){var u,l,c,p,f,h,v,m,b,y,g,_,B,k,O,P,S=this,z=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=z.length>7&&void 0!==z[7]?z[7]:null,l=z.length>8&&void 0!==z[8]&&z[8],p=z.length>10&&void 0!==z[10]?z[10]:null,f=r+"$"+i+"$"+a,(c=z.length>9&&void 0!==z[9]&&z[9])?Object.keys(this.floatingBreaks).forEach((function(e){e.includes(f)&&delete S.floatingBreaks[e]})):Object.keys(this.breaks).forEach((function(e){e.includes(f)&&delete S.breaks[e]})),h=-1,v=-1,m=-1,b=-1,"object"===e(window.lastVideoFloor)&&window.lastVideoFloor.hasOwnProperty("last")&&(h=window.lastVideoFloor.last,v=window.lastVideoFloor.outstream,m=window.lastVideoFloor.instream,b=window.lastVideoFloor.highest),y=0,"ez-o"!==r&&"ez-r-o"!==r||"undefined"==typeof __ezOutstream||!__ezOutstream.UnfilledCnt?"undefined"!=typeof __ezInstream&&__ezInstream.UnfilledCnt&&(y=__ezInstream.UnfilledCnt):y=__ezOutstream.UnfilledCnt,g={ads_enabled:n,autoplay:s?1:0,content_id:i,floating:d?1:0,pageview_id:_ezaq.page_view_id,player_id:r,position_id:o,floor_version:0,prevfl:h,prevflo:v,prevfli:m,prevflh:b,unf_c:y,pv_ep:_ezaq.t_epoch},"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("url")&&(g.parent_url=_ezaq.url),g.is_humix_app=window.is_humix_app?1:0,a&&(g.video_index=a),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("AdIndex")&&(g.ad_index=__ezOutstream.AdIndex),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("floorVersion")&&(g.floor_version=__ezOutstream.floorVersion),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("generatorVersion")&&(g.generator_version=__ezOutstream.generatorVersion),("undefined"!=typeof __ezOutstream&&__ezOutstream.rampUp||"undefined"!=typeof __ezInstream&&__ezInstream.rampUp)&&(g.reducer=1),"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("EnableVideoDeals")&&(g.enable_deals=__ezInstream.EnableVideoDeals?1:0),"string"==typeof u&&(g.ad_unit=u),"undefined"!=typeof __ezOutstream&&l&&(g.is_first_break=1),"1"===new URLSearchParams(window.location.href).get("ez_no_outstream_floor")&&(g.ez_no_outstream_floor="1"),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&(g.mod=_ezaq.ab_test_id),_=window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin,(B=new URL("/ez-vasts",_)).search=new URLSearchParams(g),t.next=32,fetch(B).catch((function(e){k=e}));case 32:if(O=t.sent,!k){t.next=36;break}return console.error("Error:",k),t.abrupt("return",[]);case 36:return t.next=38,O.json();case 38:if((P=t.sent)&&0!==P.length){t.next=42;break}return console.error("No breaks receieved. Not bidding."),t.abrupt("return",[]);case 42:if(P.forEach((function(e){c?(S.floatingBreaks[e.key]=new q(e),S.floatingBreaks[e.key].isFloating=!0,null!==p&&(S.floatingBreaks[e.key].floatPosition=p)):(S.breaks[e.key]=new q(e),S.breaks[e.key].isFloating=!1,null!==p&&(S.breaks[e.key].floatPosition=p))})),!c){t.next=45;break}return t.abrupt("return",this.getFloatingBreaks(r,i,a));case 45:return t.abrupt("return",this.getBreaks(r,i,a));case 46:case"end":return t.stop()}}),t,this)}))),function(e,t,r,n,o,a,s){return i.apply(this,arguments)})},{key:"biddingComplete",value:function(e){this.biddingInProcess[e]=!1}},{key:"getBiddingInProcess",value:function(e){return this.biddingInProcess[e]||!1}},{key:"recordBidders",value:function(e){var t=this;e.forEach((function(e){t.bidders.hasOwnProperty(e.bidder)||(t.bidders[e.bidder]={bidsResponded:0,bidsWon:0,maxBidValue:-1}),t.bidders[e.bidder].bidsResponded++,t.bidders[e.bidder].maxBidValue<e.cpm&&(t.bidders[e.bidder].maxBidValue=e.cpm),t.recordBidInHistory(e.bidder,e.cpm,!1)}))}},{key:"recordWinForBidder",value:function(e,t){this.adsShown++,this.bidders.hasOwnProperty(e)||(this.bidders[e]={bidsResponded:1,bidsWon:0,maxBidValue:-1}),this.bidders[e].bidsWon++,this.bidders[e].maxBidValue<t&&(this.bidders[e].maxBidValue=t),this.recordBidInHistory(e,t,!0)}},{key:"shouldConsiderCustomBreaksOutstreamCollision",value:function(e){var t,r;if(!e.isOutstream&&e.isAdBreakCustomPosition()&&0===e.timeOffsetSeconds)return null===(r=ezVideoAdConductor)||void 0===r||null===(r=r.getVideoAdConductor())||void 0===r||null===(r=r.getOutstreamPlayer())||void 0===r?void 0:r.isAdInProgress();var i=null===(t=window.__ez)||void 0===t||null===(t=t.nextCustomBreak)||void 0===t?void 0:t.break;if(!i)return!1;if(i.isTriggered||i.isComplete||i.IsSkipped)return!1;if(!i.getIsPlayerCurrentlyFloating()&&e.isOutstream){var n=this.getTimeUntilNextBreak(e.getPlayerId(),i);if(n<=-1&&(n=window.__ez.nextCustomBreak.timeUntilBreak||0),n<=15)return!0;if(n<=30&&e.prebidParams&&e.prebidParams.maxduration>=16)return!0}return!1}},{key:"handleCustomBreaksOutstreamCollision",value:(r=y(w().mark((function e(t,r){var i,n,o,a,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isOutstream||!t.isAdBreakCustomPosition()||0!==t.timeOffsetSeconds){e.next=7;break}return C("Skipping custom break preroll since outstream is currently playing"),t.isTriggered=!0,t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),this.biddingComplete(t.getPlayerId()),e.abrupt("return");case 7:i=window.__ez.nextCustomBreak,n=i.break,o=0;try{a=n.getPlayerId(),(o=this.getTimeUntilNextBreak(a,n))<=-1&&null!=i.timeUntilBreak&&(o=i.timeUntilBreak)}catch(e){o=null!==(s=i.timeUntilBreak)&&void 0!==s?s:0}if(!(o<=15)){e.next=16;break}return C("Waiting for custom break to finish before bidding",t.impressionId),e.next=15,new Promise((function(e){return setTimeout(e,1e3*o)}));case 15:this.bid(t,r);case 16:o<=30&&t.isOutstream&&t.prebidParams&&t.prebidParams.maxduration>=16&&(C("Updating maxduration to 15 seconds for outstream break",t.impressionId),t.prebidParams.maxduration=15,this.bid(t,r));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"getTimeUntilNextBreak",value:function(e,t){var r=-1;if(e){var i=R(e);if(i&&"function"==typeof i.getCurrentVideoTime){var n=i.getCurrentVideoTime();null!=t.timeOffsetSeconds&&null!=n&&(r=t.timeOffsetSeconds-n)}}return r}},{key:"bidSingle",value:(t=y(w().mark((function e(){var t,r,i,n,o,a,s,d,u,l,c,p,f,h,v;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vaifgf)){e.next=2;break}return e.abrupt("return",!1);case 2:return window.__ezVideoFill||(window.__ezVideoFill={}),r=window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin,(i=new URL("/ez-vast-single",r)).search=new URLSearchParams({ads_enabled:2,pageview_id:_ezaq.page_view_id,content_id:"acqOGaOjHWf",player_id:"ez-4999",position_id:4999,floor_version:0,autoplay:1,floaating:1,nd:1,pv_ep:_ezaq.t_epoch}),e.prev=6,e.next=9,fetch(i);case 9:if((n=e.sent).ok){e.next=12;break}throw new Error("HTTP error! status: ".concat(n.status));case 12:return e.next=14,n.json();case 14:if((o=e.sent)&&o.vastURL){e.next=18;break}return C("No VAST URL in response"),e.abrupt("return",!1);case 18:(a=new q(o)).isFloating=!1,window.__ezVideoFill.isFetching=!0,s=new DOMParser,d=!1;case 23:if(a.vastURL){e.next=27;break}return C("No VAST URL available"),e.abrupt("break",60);case 27:return e.next=29,fetch(a.vastURL);case 29:if((u=e.sent).ok){e.next=32;break}throw new Error("HTTP error! status: ".concat(u.status));case 32:return e.next=34,u.text();case 34:if(l=e.sent,c=s.parseFromString(l,"text/xml"),!((p=c.getElementsByTagName("VAST")[0])&&p.children.length>0)){e.next=46;break}return a.vastXML=c,f=d?a.videoFallbackFloors[a.bidFloorIndex]:a.videoAdBidFloorUnmodified,window.__ezVideoFill={isFetching:!1,bidFloor:f,bidHash:d?a.videoFallbackHashes[a.bidFloorIndex]:a.videoAdBidHash,adBreak:a},"undefined"!=typeof _ezaq&&"undefined"!=typeof __ez&&__ez.ce.AddPageviewEvent("google_informed_video_ad_fill",f),a.isOutstream&&"undefined"!=typeof __ezOutstream?__ezOutstream.UnfilledCnt=0:a.isOutstream||"undefined"==typeof __ezInstream||(__ezInstream.UnfilledCnt=0),a.isComplete=!0,e.abrupt("return",!0);case 46:if(!(a.bidFloorIndex<a.videoFallbackFloors.length-1)){e.next=57;break}return d&&a.bidFloorIndex++,a.retryCount++,(h=a.lastBidHash)&&h.includes(",")&&(h=encodeURIComponent(h)),(v=a.videoFallbackHashes[a.bidFloorIndex]).includes(",")&&(v=encodeURIComponent(v)),a.vastURL=a.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(v)),a.lastBidHash=v,d=!0,e.abrupt("continue",23);case 57:return e.abrupt("break",60);case 60:a.isComplete=!0,e.next=66;break;case 63:e.prev=63,e.t0=e.catch(6),C("Error in bidSingle:",e.t0);case 66:return window.__ezVideoFill.isFetching=!1,e.abrupt("return",!1);case 68:case"end":return e.stop()}}),e,null,[[6,63]])}))),function(){return t.apply(this,arguments)})},{key:"recordBidInHistory",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.globalBidHistory[e]||(this.globalBidHistory[e]={bids:[],avgBid:0,maxBid:0,winCount:0,totalBids:0});var i=this.globalBidHistory[e];i.bids.push({cpm:t,timestamp:Date.now(),wasWinner:r}),i.totalBids++,i.avgBid=(i.avgBid*(i.totalBids-1)+t)/i.totalBids,i.maxBid=Math.max(i.maxBid,t),r&&i.winCount++,i.bids.length>100&&i.bids.shift()}},{key:"getBidderPerformance",value:function(){var e=0,t=0,r=0;return Object.values(this.globalBidHistory).forEach((function(i){i.bids.forEach((function(i){e++,i.wasWinner&&t++,r+=i.cpm}))})),{winRate:e>0?t/e:0,avgBid:e>0?r/e:0}}},{key:"initializeBidFilter",value:function(){epbjs.que.push((function(){var e=oe.initVideoBidFilter();void 0===window.__ez&&(window.__ez={}),void 0===window.__ez.vbf&&(window.__ez.vbf={}),window.__ez.vbf=e,C("Video bid filter initialized to prevent low CPM bids from being cached externally")}))}}]);var t,r,i,n,a}(),Gr=function(){return d((function e(){o(this,e)}),[{key:"init",value:function(){var e;(e=__ez).vhb||(e.vhb=new qr)}}])}();var Wr=new m,Kr=new Gr;Wr.init(),Kr.init()})()})();